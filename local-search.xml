<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>单链表快速排序</title>
    <link href="/2022/11/03/%E5%8D%95%E9%93%BE%E8%A1%A8%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/"/>
    <url>/2022/11/03/%E5%8D%95%E9%93%BE%E8%A1%A8%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="题目描述">题目描述</h3><p>给定一个单链表，请使用快速排序算法对其排序。</p><p>要求：期望平均时间复杂度为 <spanclass="math inline">\(O(nlogn)\)</span>，期望额外空间复杂度为 <spanclass="math inline">\(O(logn)\)</span>。</p><p><strong>思考题：</strong>如果只能改变链表结构，不能修改每个节点的val值该如何做呢？</p><h4 id="数据范围">数据范围</h4><p>链表中的所有数大小均在 <span class="math inline">\(int\)</span>范围内，链表长度在 <span class="math inline">\([0,10000]\)</span>。<br />本题数据完全随机生成。</p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">[5, 3, 2]</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">[2, 3, 5]</code></pre><hr /><h3 id="算法">算法</h3><h4 id="快速排序-onlogn">(快速排序) <spanclass="math inline">\(O(nlogn)\)</span></h4><p>使用三个虚拟头指针left, mid,right，记录每次partition的结果，这里取头结点val的值作为分界线。</p><p>递归的过程中，我们每次都要遍历整个链表，对节点值小于val的节点接到left中，节点值等于val的节点接到mid中，节点值大于val的节点接到right中，之后还要将三个链表的尾结点置为空。</p><p>接着递归处理left、right，递归结束后将三段拼接起来即可。</p><figure><img src="https://z4a.net/images/2022/11/03/-2022-11-03-201128.png"alt="-2022-11-03-201128.png" /><figcaption aria-hidden="true">-2022-11-03-201128.png</figcaption></figure><h4 id="java-代码">Java 代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for singly-linked list.</span><br><span class="hljs-comment"> * public class ListNode &#123;</span><br><span class="hljs-comment"> *     int val;</span><br><span class="hljs-comment"> *     ListNode next;</span><br><span class="hljs-comment"> *     ListNode(int x) &#123; val = x; &#125;</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">getTail</span><span class="hljs-params">(ListNode head)</span> &#123;<br>        <span class="hljs-keyword">while</span>(head.next != <span class="hljs-literal">null</span>) &#123;<br>            head = head.next;<br>        &#125;<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">quickSortList</span><span class="hljs-params">(ListNode head)</span> &#123;<br>        <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">null</span> || head.next == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> head;<br>        &#125;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(-<span class="hljs-number">1</span>);<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(-<span class="hljs-number">1</span>);<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(-<span class="hljs-number">1</span>);<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">ltail</span> <span class="hljs-operator">=</span> left, mtail = mid, rtail = right;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">val</span> <span class="hljs-operator">=</span> head.val;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">ListNode</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> head; p != <span class="hljs-literal">null</span>; p = p.next) &#123;<br>            <span class="hljs-keyword">if</span>(p.val == val) mtail = mtail.next = p;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(p.val &lt; val) ltail = ltail.next = p;<br>            <span class="hljs-keyword">else</span> rtail = rtail.next = p;<br>        &#125;<br>        ltail.next = mtail.next = rtail.next = <span class="hljs-literal">null</span>;<br>        left.next = quickSortList(left.next);<br>        right.next = quickSortList(right.next);<br><br>        getTail(left).next = mid.next;<br>        getTail(left).next = right.next;<br><br>        <span class="hljs-keyword">return</span> left.next;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>快速排序</tag>
      
      <tag>链表</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>n皇后</title>
    <link href="/2022/10/20/n%E7%9A%87%E5%90%8E/"/>
    <url>/2022/10/20/n%E7%9A%87%E5%90%8E/</url>
    
    <content type="html"><![CDATA[<h3 id="题目描述">题目描述</h3><p><span class="math inline">\(n-\)</span>皇后问题是指将 <spanclass="math inline">\(n\)</span> 个皇后放在 <spanclass="math inline">\(n \times n\)</span>的国际象棋棋盘上，使得皇后不能相互攻击到，即任意两个皇后都不能处于同一行、同一列或同一斜线上。</p><figure><imgsrc="https://cdn.acwing.com/media/article/image/2019/06/08/19_860e00c489-1_597ec77c49-8-queens.png"alt="1_597ec77c49-8-queens.png" /><figcaption aria-hidden="true">1_597ec77c49-8-queens.png</figcaption></figure><p>现在给定整数 <spanclass="math inline">\(n\)</span>，请你输出所有的满足条件的棋子摆法。</p><h4 id="输入格式">输入格式</h4><p>共一行，包含整数 <span class="math inline">\(n\)</span>。</p><h4 id="输出格式">输出格式</h4><p>每个解决方案占 <span class="math inline">\(n\)</span>行，每行输出一个长度为 <span class="math inline">\(n\)</span>的字符串，用来表示完整的棋盘状态。</p><p>其中 <code>.</code> 表示某一个位置的方格状态为空，<code>Q</code>表示某一个位置的方格上摆着皇后。</p><p>每个方案输出完成后，输出一个空行。</p><p><strong>注意：行末不能有多余空格。</strong></p><p>输出方案的顺序任意，只要不重复且没有遗漏即可。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le n \le 9\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">4</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">.Q.....QQ.....Q...Q.Q......Q.Q..</code></pre><hr /><h3 id="算法">算法</h3><h4 id="dfs">(dfs)</h4><p><img src="https://s1.ax1x.com/2022/10/20/x61vut.jpg" /></p><h4 id="c-代码">C++ 代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> n;<br><span class="hljs-type">char</span> g[N][N];<br><span class="hljs-type">bool</span> col[N], dg[N], udg[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(u &gt;= n)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>        &#123;<br>            <span class="hljs-built_in">puts</span>(g[i]);<br>        &#125;<br>        <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(!col[i] &amp;&amp; !dg[u + i] &amp;&amp; !udg[n + u -i])<br>        &#123;<br>            g[u][i] = <span class="hljs-string">&#x27;Q&#x27;</span>;<br>            col[i] = dg[u+i] = udg[u-i+n] = <span class="hljs-literal">true</span>;<br>            <span class="hljs-built_in">dfs</span>(u+<span class="hljs-number">1</span>);<br>            g[u][i] = <span class="hljs-string">&#x27;.&#x27;</span>;<br>            col[i] = dg[u+i] = udg[u-i+n] = <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)<br>            g[i][j] = <span class="hljs-string">&#x27;.&#x27;</span>;<br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="java代码">Java代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">char</span> [][]g = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[N][N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> []col = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[<span class="hljs-number">2</span>*N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> []dg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[<span class="hljs-number">2</span>*N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> []udg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[<span class="hljs-number">2</span>*N];<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span> &#123;<br>        <span class="hljs-keyword">if</span>(u &gt;= n) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++)<br>                    System.out.print(g[i][j]);<br>                System.out.println();<br>            &#125;<br><br>            System.out.println();<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-keyword">if</span>(col[i] == <span class="hljs-literal">false</span> &amp;&amp; dg[u+i] == <span class="hljs-literal">false</span> &amp;&amp; udg[u-i+n] == <span class="hljs-literal">false</span>) &#123;<br>                col[i] = <span class="hljs-literal">true</span>;<br>                dg[u+i] = <span class="hljs-literal">true</span>;<br>                udg[u-i+n] = <span class="hljs-literal">true</span>;<br>                g[u][i] = <span class="hljs-string">&#x27;Q&#x27;</span>;<br>                dfs(u+<span class="hljs-number">1</span>);<br>                col[i] = <span class="hljs-literal">false</span>;<br>                dg[i+u] = <span class="hljs-literal">false</span>;<br>                udg[u-i+n] = <span class="hljs-literal">false</span>;<br>                g[u][i] = <span class="hljs-string">&#x27;.&#x27;</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String []args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++)<br>                g[i][j] = <span class="hljs-string">&#x27;.&#x27;</span>;<br>        dfs(<span class="hljs-number">0</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dfs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>排列数字</title>
    <link href="/2022/10/20/%E6%8E%92%E5%88%97%E6%95%B0%E5%AD%97/"/>
    <url>/2022/10/20/%E6%8E%92%E5%88%97%E6%95%B0%E5%AD%97/</url>
    
    <content type="html"><![CDATA[<h3 id="题目描述">题目描述</h3><p>给定一个整数 <span class="math inline">\(n\)</span>，将数字 <spanclass="math inline">\(1 \sim n\)</span>排成一排，将会有很多种排列方法。</p><p>现在，请你按照字典序将所有的排列方法输出。</p><h4 id="输入格式">输入格式</h4><p>共一行，包含一个整数 <span class="math inline">\(n\)</span>。</p><h4 id="输出格式">输出格式</h4><p>按字典序输出所有排列方案，每个方案占一行。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le n \le 7\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">3</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">1 2 31 3 22 1 32 3 13 1 23 2 1</code></pre><hr /><h3 id="算法">算法</h3><h4 id="dfs">(dfs)</h4><h4 id="c-代码">C++ 代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> path[N];<br><span class="hljs-type">bool</span> st[N];<br><span class="hljs-type">int</span> n;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(u &gt; n)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;=n; i++)<br>        &#123;<br>            cout &lt;&lt; path[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        &#125;<br>        cout &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(!st[i])<br>        &#123;<br>            st[i] = <span class="hljs-literal">true</span>;<br>            path[u] = i;<br>            <span class="hljs-built_in">dfs</span>(u+<span class="hljs-number">1</span>);<br>            st[i] = <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; n;<br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="java代码">Java代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []path = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [N];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> []st = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[N];<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span> &#123;<br>        <span class="hljs-keyword">if</span>(u &gt; n) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>                System.out.print(path[i] + <span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>            System.out.println();<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>         <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>             <span class="hljs-keyword">if</span>(st[i] == <span class="hljs-literal">false</span>) &#123;<br>                 st[i] = <span class="hljs-literal">true</span>;<br>                 path[u] = i; <span class="hljs-comment">//输出路径中第U个数字为i</span><br>                 dfs(u+<span class="hljs-number">1</span>);<br>                 st[i] = <span class="hljs-literal">false</span>;<br>             &#125;<br>         &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = in.nextInt();<br>        dfs(<span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dfs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>连通块中点的数量</title>
    <link href="/2022/10/19/%E8%BF%9E%E9%80%9A%E5%9D%97%E4%B8%AD%E7%82%B9%E7%9A%84%E6%95%B0%E9%87%8F/"/>
    <url>/2022/10/19/%E8%BF%9E%E9%80%9A%E5%9D%97%E4%B8%AD%E7%82%B9%E7%9A%84%E6%95%B0%E9%87%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="题目描述">题目描述</h3><p>给定一个包含 <span class="math inline">\(n\)</span> 个点（编号为<span class="math inline">\(1 \simn\)</span>）的无向图，初始时图中没有边。</p><p>现在要进行 <span class="math inline">\(m\)</span>个操作，操作共有三种：</p><ol type="1"><li><code>C a b</code>，在点 <span class="math inline">\(a\)</span> 和点<span class="math inline">\(b\)</span> 之间连一条边，<spanclass="math inline">\(a\)</span> 和 <spanclass="math inline">\(b\)</span> 可能相等；</li><li><code>Q1 a b</code>，询问点 <span class="math inline">\(a\)</span>和点 <span class="math inline">\(b\)</span> 是否在同一个连通块中，<spanclass="math inline">\(a\)</span> 和 <spanclass="math inline">\(b\)</span> 可能相等；</li><li><code>Q2 a</code>，询问点 <span class="math inline">\(a\)</span>所在连通块中点的数量；</li></ol><h4 id="输入格式">输入格式</h4><p>第一行输入整数 <span class="math inline">\(n\)</span> 和 <spanclass="math inline">\(m\)</span>。</p><p>接下来 <span class="math inline">\(m\)</span>行，每行包含一个操作指令，指令为 <code>C a b</code>，<code>Q1 a b</code>或 <code>Q2 a</code> 中的一种。</p><h4 id="输出格式">输出格式</h4><p>对于每个询问指令 <code>Q1 a b</code>，如果 <spanclass="math inline">\(a\)</span> 和 <spanclass="math inline">\(b\)</span> 在同一个连通块中，则输出<code>Yes</code>，否则输出 <code>No</code>。</p><p>对于每个询问指令 <code>Q2 a</code>，输出一个整数表示点 <spanclass="math inline">\(a\)</span> 所在连通块中点的数量</p><p>每个结果占一行。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le n,m \le 10^5\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">5 5C 1 2Q1 1 2Q2 1C 2 5Q2 5</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">Yes23</code></pre><hr /><h3 id="算法">算法</h3><h4 id="并查集">(并查集)</h4><p>维护并查集的同时，维护一个size数组，存储当前节点作为祖宗节点时连通块的数量</p><p>并查集请转到<ahref="https://blog.ymswdfg.top/2022/10/19/%E5%90%88%E9%9B%86%E5%B9%B6%E9%9B%86/">合集并集- Ymswdfg</a></p><h4 id="c-代码">C++ 代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> p[N];<br><span class="hljs-type">int</span> psize[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(p[x] != x) p[x] = <span class="hljs-built_in">find</span>(p[x]);<br>    <span class="hljs-keyword">return</span> p[x];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m;<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        p[i] = i;<br>        psize[i] = <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">while</span>(m--) <br>    &#123;<br>        string s;<br>        <span class="hljs-type">int</span> a, b;<br>        cin &gt;&gt; s ;<br>        <span class="hljs-keyword">if</span>(s == <span class="hljs-string">&quot;C&quot;</span>)<br>        &#123;<br>            cin &gt;&gt; a &gt;&gt; b;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">find</span>(a) != <span class="hljs-built_in">find</span>(b))<br>            &#123;<br>                <span class="hljs-type">int</span> sa = psize[<span class="hljs-built_in">find</span>(a)];<br>                <span class="hljs-type">int</span> sb = psize[<span class="hljs-built_in">find</span>(b)];<br>                p[<span class="hljs-built_in">find</span>(a)] = <span class="hljs-built_in">find</span>(b);<br>                psize[<span class="hljs-built_in">find</span>(b)] = sa + sb;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s == <span class="hljs-string">&quot;Q1&quot;</span>)<br>        &#123;<br>            cin &gt;&gt; a  &gt;&gt; b;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">find</span>(a) == <span class="hljs-built_in">find</span>(b))cout &lt;&lt;<span class="hljs-string">&quot;Yes&quot;</span> &lt;&lt;endl;<br>            <span class="hljs-keyword">else</span> cout &lt;&lt; <span class="hljs-string">&quot;No&quot;</span> &lt;&lt;endl;<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            cin &gt;&gt; a;<br>            cout &lt;&lt; psize[<span class="hljs-built_in">find</span>(a)] &lt;&lt; endl;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>并查集</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>合集并集</title>
    <link href="/2022/10/19/%E5%90%88%E9%9B%86%E5%B9%B6%E9%9B%86/"/>
    <url>/2022/10/19/%E5%90%88%E9%9B%86%E5%B9%B6%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h3 id="题目描述">题目描述</h3><p>一共有 <span class="math inline">\(n\)</span> 个数，编号是 <spanclass="math inline">\(1 \simn\)</span>，最开始每个数各自在一个集合中。</p><p>现在要进行 <span class="math inline">\(m\)</span>个操作，操作共有两种：</p><ol type="1"><li><code>M a b</code>，将编号为 <span class="math inline">\(a\)</span>和 <span class="math inline">\(b\)</span>的两个数所在的集合合并，如果两个数已经在同一个集合中，则忽略这个操作；</li><li><code>Q a b</code>，询问编号为 <spanclass="math inline">\(a\)</span> 和 <spanclass="math inline">\(b\)</span> 的两个数是否在同一个集合中；</li></ol><h4 id="输入格式">输入格式</h4><p>第一行输入整数 <span class="math inline">\(n\)</span> 和 <spanclass="math inline">\(m\)</span>。</p><p>接下来 <span class="math inline">\(m\)</span>行，每行包含一个操作指令，指令为 <code>M a b</code> 或<code>Q a b</code> 中的一种。</p><h4 id="输出格式">输出格式</h4><p>对于每个询问指令 <code>Q a b</code>，都要输出一个结果，如果 <spanclass="math inline">\(a\)</span> 和 <spanclass="math inline">\(b\)</span> 在同一集合内，则输出<code>Yes</code>，否则输出 <code>No</code>。</p><p>每个结果占一行。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le n,m \le 10^5\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">4 5M 1 2M 3 4Q 1 2Q 1 3Q 3 4</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">YesNoYes</code></pre><hr /><h3 id="算法">算法</h3><h4 id="并查集">(并查集)</h4><p>维护祖宗节点，根据祖宗节点是否为同一个判断是否联通，查询时维护插入操作，使得连通块的所有节点直接指向祖宗节点。</p><ol type="1"><li><p>开始时，每个节点的祖宗节点都是自己。</p></li><li><p>插入时，如果两个节点不连通，使得其中一个节点的祖宗节点为另一个的祖宗。</p></li><li><p>查询时，维护祖宗节点，压缩路径，降低查询的时间复杂度。</p></li></ol><h4 id="c-代码">C++ 代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> q[N];<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(q[x] != x)q[x] = <span class="hljs-built_in">find</span>(q[x]);<br>    <span class="hljs-keyword">return</span> q[x];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n,m;<br>    cin  &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        q[i] = i;<br><br>    <span class="hljs-keyword">while</span>(m--)<br>    &#123;<br>        string s;<br>        <span class="hljs-type">int</span> a,b;<br>        cin &gt;&gt; s &gt;&gt; a &gt;&gt; b;<br>        <span class="hljs-keyword">if</span>(s == <span class="hljs-string">&quot;M&quot;</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">find</span>(a)!= <span class="hljs-built_in">find</span>(b))q[<span class="hljs-built_in">find</span>(a)] = <span class="hljs-built_in">find</span>(b);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s == <span class="hljs-string">&quot;Q&quot;</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">find</span>(a) == <span class="hljs-built_in">find</span>(b))<br>                cout &lt;&lt; <span class="hljs-string">&quot;Yes&quot;</span> &lt;&lt; endl;<br>            <span class="hljs-keyword">else</span> <br>                cout &lt;&lt; <span class="hljs-string">&quot;No&quot;</span> &lt;&lt; endl;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="java代码">Java代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">100010</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [N];<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span>&#123;<br>        <span class="hljs-keyword">if</span>(q[x] != x) q[x] = find(q[x]);<br>        <span class="hljs-keyword">return</span> q[x];<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">int</span> n, m;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = in.nextInt();<br>        m = in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++)<br>            q[i] = i;<br>        <span class="hljs-keyword">while</span>(m-- &gt; <span class="hljs-number">0</span>)&#123;<br>            String s;<br>            <span class="hljs-type">int</span> a,b;<br>            s = in.next();<br>            a = in.nextInt();<br>            b = in.nextInt();<br>            <span class="hljs-keyword">if</span>(s.equals(<span class="hljs-string">&quot;M&quot;</span>)) &#123;<br>                q[find(a)] = find(b);<br>            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s.equals(<span class="hljs-string">&quot;Q&quot;</span>))&#123;<br>                <span class="hljs-keyword">if</span>(find(a) == find(b))<br>                    System.out.println(<span class="hljs-string">&quot;Yes&quot;</span>);<br>                <span class="hljs-keyword">else</span> &#123;<br>                    System.out.println(<span class="hljs-string">&quot;No&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>并查集</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>对接qq登录</title>
    <link href="/2022/10/16/%E5%AF%B9%E6%8E%A5qq%E7%99%BB%E5%BD%95/"/>
    <url>/2022/10/16/%E5%AF%B9%E6%8E%A5qq%E7%99%BB%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h3 id="前往qq互联进行开发者账号审核">1.前往qq互联进行开发者账号审核</h3><p><a href="https://connect.qq.com/">QQ互联官网首页</a></p><p>选择个人接入后填入个人信息</p><p>注：手持照片得用后置摄像头拍摄，前置摄像头有镜像功能，手指不能遮挡证件信息，一定要拍清楚，否则会被驳回！</p><ol type="1"><li>点击应用管理</li></ol><figure><imgsrc="https://cdn.acwing.com/media/article/image/2022/10/16/72081_45d28aee4c-屏幕截图-2022-10-16-105003.png"alt="屏幕截图 2022-10-16 105003.png" /><figcaption aria-hidden="true">屏幕截图 2022-10-16105003.png</figcaption></figure><ol start="2" type="1"><li><p>点击创建应用，创建网站应用</p><figure><imgsrc="https://cdn.acwing.com/media/article/image/2022/10/16/72081_9ce593304c-屏幕截图-2022-10-16-105241.png"alt="屏幕截图 2022-10-16 105241.png" /><figcaption aria-hidden="true">屏幕截图 2022-10-16105241.png</figcaption></figure></li><li><p>填写资料，网站一栏填写要对接qq登录的网站网址</p><figure><imgsrc="https://cdn.acwing.com/media/article/image/2022/10/16/72081_e758f69f4c-屏幕截图-2022-10-16-105445.png"alt="屏幕截图 2022-10-16 105445.png" /><figcaption aria-hidden="true">屏幕截图 2022-10-16105445.png</figcaption></figure></li></ol><p>       <imgsrc="https://cdn.acwing.com/media/article/image/2022/10/16/72081_491ec08e4c-屏幕截图-2022-10-16-105552.png"alt="屏幕截图 2022-10-16 105552.png" /></p><p>回调地址填写前端地址，如我的前端有个页面，地址是https://www.example.com/user/account/qq/receive_code</p><p>此地址用来处理qq返回的请求路径，此处就填写这个。</p><p>应用创建成功后，编写代码</p><h3 id="前端代码">2. 前端代码</h3><ol type="1"><li><p>写一个上文提到的回调地址页面</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;template&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/router/index&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123;useStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vuex&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123;useRoute&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> $ <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;jquery&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;UserAccountQQReceiveCodeView&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> myRoute = <span class="hljs-title function_">useRoute</span>();</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useStore</span>();</span></span><br><span class="language-javascript"><span class="language-xml">    $.<span class="hljs-title function_">ajax</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;https://www.example/api/user/account/qq/receive_code&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;GET&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">data</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">code</span>: myRoute.<span class="hljs-property">query</span>.<span class="hljs-property">code</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">state</span>: myRoute.<span class="hljs-property">query</span>.<span class="hljs-property">state</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-params">resp</span> =&gt;</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">if</span> (resp.<span class="hljs-property">result</span> === <span class="hljs-string">&quot;success&quot;</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">          <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&quot;jwt_token&quot;</span>, resp.<span class="hljs-property">jwt_token</span>);</span></span><br><span class="language-javascript"><span class="language-xml">          store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;updateToken&quot;</span>, resp.<span class="hljs-property">jwt_token</span>);</span></span><br><span class="language-javascript"><span class="language-xml">          router.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;home&quot;</span>&#125;);</span></span><br><span class="language-javascript"><span class="language-xml">          store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;updatePullingInfo&quot;</span>, <span class="hljs-literal">false</span>);</span></span><br><span class="language-javascript"><span class="language-xml">        &#125; <span class="hljs-keyword">else</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">          router.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;user_account_login&quot;</span>&#125;);</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;)</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li><li><p>登录页必须有qq的icon，负责，审核不给通过,在登录页添加代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;div @click=<span class="hljs-string">&quot;qq_login&quot;</span>&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;30&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;cursor: pointer;&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;图床链接&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    /&gt;</span></span><br>&lt;/div&gt;<br></code></pre></td></tr></table></figure></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">qq_login</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  $.<span class="hljs-title function_">ajax</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;https://www.zimei.fun/api/user/account/qq/apply_code/&quot;</span>,<br>    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;GET&quot;</span>,<br>    <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-params">resp</span> =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (resp.<span class="hljs-property">result</span> === <span class="hljs-string">&quot;success&quot;</span>) &#123;<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">replace</span>(resp.<span class="hljs-property">apply_code_url</span>);<br>      &#125;<br>    &#125;<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>修改路由</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/account/qq/receive_code&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;user_account_qq_receive_code&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">()=&gt;</span><span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;@/views/user/account/UserAccountQQReceiveCodeView&#x27;</span>),<br>    <span class="hljs-attr">meta</span>:&#123;<br>    requestAuth : <span class="hljs-literal">false</span><br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure><h3 id="实现后端代码">3. 实现后端代码</h3><ol type="1"><li><p>service接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">QQWebService</span> &#123;<br>    JSONObject <span class="hljs-title function_">applyCode</span><span class="hljs-params">()</span>;<br>    JSONObject <span class="hljs-title function_">receiveCode</span><span class="hljs-params">(String code,String state)</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>service实现</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;<br><span class="hljs-keyword">import</span> com.lxs.backend.mapper.UserMapper;<br><span class="hljs-keyword">import</span> com.lxs.backend.pojo.User;<br><span class="hljs-keyword">import</span> com.lxs.backend.service.impl.user.account.acwing.utils.HttpClientUtil;<br><span class="hljs-keyword">import</span> com.lxs.backend.service.user.account.qq.QQWebService;<br><span class="hljs-keyword">import</span> com.lxs.backend.utils.JwtUtil;<br><span class="hljs-keyword">import</span> org.apache.http.NameValuePair;<br><span class="hljs-keyword">import</span> org.apache.http.message.BasicNameValuePair;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><br><span class="hljs-keyword">import</span> java.io.UnsupportedEncodingException;<br><span class="hljs-keyword">import</span> java.net.URLEncoder;<br><span class="hljs-keyword">import</span> java.time.Duration;<br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Random;<br><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QQWebServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">QQWebService</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">appId</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;你的ID&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">appSecret</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;你的密匙&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">redirectUri</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;https://www.zimei.fun/user/account/qq/receive_code&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">applyAccessTokenUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;https://graph.qq.com/oauth2.0/token&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">getUserInfoUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;https://graph.qq.om/user/get_user_info&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String getUserOpenIDUrl=<span class="hljs-string">&quot;https://graph.qq.com/oauth2.0/me&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Random</span> <span class="hljs-variable">random</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>();<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserMapper userMapper;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> JSONObject <span class="hljs-title function_">applyCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">resp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">encodeUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            encodeUrl = URLEncoder.encode(redirectUri, <span class="hljs-string">&quot;UTF-8&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (UnsupportedEncodingException e) &#123;<br>            e.printStackTrace();<br>            resp.put(<span class="hljs-string">&quot;result&quot;</span>, <span class="hljs-string">&quot;failed&quot;</span>);<br>            <span class="hljs-keyword">return</span> resp;<br>        &#125;<br><br>        <span class="hljs-comment">//随机字符串，防止csrf攻击</span><br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">state</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            state.append((<span class="hljs-type">char</span>) (random.nextInt(<span class="hljs-number">10</span>) + <span class="hljs-string">&#x27;0&#x27;</span>));<br>        &#125;<br>        <span class="hljs-comment">//存到redis里，有效期设置为10分钟</span><br>        resp.put(<span class="hljs-string">&quot;result&quot;</span>, <span class="hljs-string">&quot;success&quot;</span>);<br>        redisTemplate.opsForValue().set(state.toString(), <span class="hljs-string">&quot;true&quot;</span>);<br>        redisTemplate.expire(state.toString(), Duration.ofMinutes(<span class="hljs-number">10</span>));<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">applyCodeUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;https://graph.qq.com/oauth2.0/authorize&quot;</span><br>                + <span class="hljs-string">&quot;?response_type=&quot;</span>+<span class="hljs-string">&quot;code&quot;</span><br>                + <span class="hljs-string">&quot;&amp;client_id=&quot;</span> + appId<br>                + <span class="hljs-string">&quot;&amp;redirect_uri=&quot;</span> + encodeUrl<br>                + <span class="hljs-string">&quot;&amp;state=&quot;</span> + state<br>                ;<br>        resp.put(<span class="hljs-string">&quot;apply_code_url&quot;</span>, applyCodeUrl);<br><br>        <span class="hljs-keyword">return</span> resp;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> JSONObject <span class="hljs-title function_">receiveCode</span><span class="hljs-params">(String code, String state)</span> &#123;<br>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">resp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>();<br>        resp.put(<span class="hljs-string">&quot;result&quot;</span>, <span class="hljs-string">&quot;failed&quot;</span>);<br>        <span class="hljs-keyword">if</span> (code == <span class="hljs-literal">null</span> || state == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> resp;<br>        <span class="hljs-keyword">if</span> (Boolean.FALSE.equals(redisTemplate.hasKey(state))) <span class="hljs-keyword">return</span> resp;<br>        redisTemplate.delete(state);<br><span class="hljs-comment">//        获取access_token</span><br>        List&lt;NameValuePair&gt; nameValuePairs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br>        nameValuePairs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicNameValuePair</span>(<span class="hljs-string">&quot;grant_type&quot;</span>, <span class="hljs-string">&quot;authorization_code&quot;</span>));<br>        nameValuePairs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicNameValuePair</span>(<span class="hljs-string">&quot;client_id&quot;</span>, appId));<br>        nameValuePairs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicNameValuePair</span>(<span class="hljs-string">&quot;client_secret&quot;</span>, appSecret));<br>        nameValuePairs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicNameValuePair</span>(<span class="hljs-string">&quot;code&quot;</span>, code));<br>        nameValuePairs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicNameValuePair</span>(<span class="hljs-string">&quot;redirect_uri&quot;</span>, redirectUri));<br>        nameValuePairs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicNameValuePair</span>(<span class="hljs-string">&quot;fmt&quot;</span>, <span class="hljs-string">&quot;json&quot;</span>));<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">getString</span> <span class="hljs-operator">=</span> HttpClientUtil.get(applyAccessTokenUrl, nameValuePairs);<br>        <span class="hljs-keyword">if</span> (getString == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> resp;<br>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">getResp</span> <span class="hljs-operator">=</span> JSONObject.parseObject(getString);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">accessToken</span> <span class="hljs-operator">=</span> getResp.getString(<span class="hljs-string">&quot;access_token&quot;</span>);<br><br><span class="hljs-comment">//        获取open_id</span><br>        nameValuePairs=<span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br>        nameValuePairs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicNameValuePair</span>(<span class="hljs-string">&quot;access_token&quot;</span>,accessToken));<br>        nameValuePairs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicNameValuePair</span>(<span class="hljs-string">&quot;fmt&quot;</span>, <span class="hljs-string">&quot;json&quot;</span>));<br><br>        getString=HttpClientUtil.get(getUserOpenIDUrl,nameValuePairs);<br>        <span class="hljs-keyword">if</span>(getString==<span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> resp;<br>        getResp = JSONObject.parseObject(getString);<br>        String openId=getResp.getString(<span class="hljs-string">&quot;openid&quot;</span>);<br><br>        <span class="hljs-keyword">if</span> (accessToken == <span class="hljs-literal">null</span> || openId == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> resp;<br><br>        QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>        queryWrapper.eq(<span class="hljs-string">&quot;openid_qq&quot;</span>, openId);<br>        List&lt;User&gt; users = userMapper.selectList(queryWrapper);<br><br><span class="hljs-comment">//        用户已经授权，自动登录</span><br>        <span class="hljs-keyword">if</span> (!users.isEmpty()) &#123;<br>            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> users.get(<span class="hljs-number">0</span>);<br>            <span class="hljs-comment">//生成JWT</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">jwt</span> <span class="hljs-operator">=</span> JwtUtil.createJWT(user.getId().toString());<br><br>            resp.put(<span class="hljs-string">&quot;result&quot;</span>, <span class="hljs-string">&quot;success&quot;</span>);<br>            resp.put(<span class="hljs-string">&quot;jwt_token&quot;</span>, jwt);<br>            <span class="hljs-keyword">return</span> resp;<br>        &#125;<br><br><span class="hljs-comment">//        新用户授权，获取用户信息</span><br>        nameValuePairs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br>        nameValuePairs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicNameValuePair</span>(<span class="hljs-string">&quot;access_token&quot;</span>, accessToken));<br>        nameValuePairs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicNameValuePair</span>(<span class="hljs-string">&quot;openid&quot;</span>, openId));<br>        nameValuePairs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicNameValuePair</span>(<span class="hljs-string">&quot;oauth_consumer_key&quot;</span>, appId));<br>        getString = HttpClientUtil.get(getUserInfoUrl, nameValuePairs);<br>        <span class="hljs-keyword">if</span> (getString == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> resp;<br><br>        getResp = JSONObject.parseObject(getString);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> getResp.getString(<span class="hljs-string">&quot;nickname&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">photo</span> <span class="hljs-operator">=</span> getResp.getString(<span class="hljs-string">&quot;figureurl_1&quot;</span>);<span class="hljs-comment">//50*50的头像</span><br><br>        <span class="hljs-keyword">if</span> (username == <span class="hljs-literal">null</span> || photo == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> resp;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            QueryWrapper&lt;User&gt; usernameQueryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>            usernameQueryWrapper.eq(<span class="hljs-string">&quot;username&quot;</span>, username);<br>            <span class="hljs-keyword">if</span> (userMapper.selectList(usernameQueryWrapper).isEmpty()) <span class="hljs-keyword">break</span>;<br>            username += (<span class="hljs-type">char</span>) (random.nextInt(<span class="hljs-number">10</span>) + <span class="hljs-string">&#x27;0&#x27;</span>);<br>            <span class="hljs-keyword">if</span> (i == <span class="hljs-number">99</span>) <span class="hljs-keyword">return</span> resp;<br>        &#125;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<br>                <span class="hljs-literal">null</span>,<br>                username,<br>                <span class="hljs-literal">null</span>,<br>                photo,<br>                <span class="hljs-number">1500</span>,<br>                <span class="hljs-literal">null</span>,<br>                openId<br>        );<br>        userMapper.insert(user);<br>        <span class="hljs-comment">//生成JWT</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">jwt</span> <span class="hljs-operator">=</span> JwtUtil.createJWT(user.getId().toString());<br>        resp.put(<span class="hljs-string">&quot;result&quot;</span>, <span class="hljs-string">&quot;success&quot;</span>);<br>        resp.put(<span class="hljs-string">&quot;jwt_token&quot;</span>, jwt);<br>        <span class="hljs-keyword">return</span> resp;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QQWebController</span> &#123;<br> <span class="hljs-meta">@Autowired</span><br> <span class="hljs-keyword">private</span> QQWebService qqWebService; <br><span class="hljs-meta">@GeMapping(&quot;/api/user/account/qq/apply_code/&quot;)</span><br> JSONObject <span class="hljs-title function_">applyCode</span><span class="hljs-params">()</span>&#123;<br> <span class="hljs-keyword">return</span> qqWebService.applyCode();<br> &#125; <br><span class="hljs-meta">@GetMapping(&quot;/api/user/account/qq/receive_code&quot;)</span><br> <span class="hljs-keyword">public</span> JSONObject <span class="hljs-title function_">receiveCode</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> Map&lt;String,String&gt; data)</span>&#123;<br> String code=data.get(<span class="hljs-string">&quot;code&quot;</span>);<br> String state=data.get(<span class="hljs-string">&quot;state&quot;</span>);<br> <span class="hljs-keyword">return</span> qqWebService.receiveCode(code,state);<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>放行后端路由</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">.antMatchers(<br>                      <span class="hljs-string">&quot;/api/user/account/token/&quot;</span>,<br>                       <span class="hljs-string">&quot;/api/user/account/register/&quot;</span>,<br>                       <span class="hljs-string">&quot;/api/user/account/qq/apply_code/&quot;</span>,<br>                       <span class="hljs-string">&quot;/api/user/account/qq/receive_code&quot;</span><br>               ).permitAll()<br></code></pre></td></tr></table></figure></li><li><p>工具类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.http.HttpEntity;<br><span class="hljs-keyword">import</span> org.apache.http.NameValuePair;<br><span class="hljs-keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;<br><span class="hljs-keyword">import</span> org.apache.http.client.methods.HttpGet;<br><span class="hljs-keyword">import</span> org.apache.http.client.utils.URIBuilder;<br><span class="hljs-keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;<br><span class="hljs-keyword">import</span> org.apache.http.impl.client.HttpClients;<br><span class="hljs-keyword">import</span> org.apache.http.util.EntityUtils;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.URISyntaxException;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpClientUtil</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">get</span><span class="hljs-params">(String url, List&lt;NameValuePair&gt; params)</span> &#123;<br>        <span class="hljs-type">URIBuilder</span> <span class="hljs-variable">uriBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            uriBuilder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URIBuilder</span>(url);<br>        &#125; <span class="hljs-keyword">catch</span> (URISyntaxException e) &#123;<br>            e.printStackTrace();<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        uriBuilder.setParameters(params);<br><br>        <span class="hljs-keyword">try</span> (<span class="hljs-type">CloseableHttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> HttpClients.createDefault()) &#123;<br>            <span class="hljs-type">HttpGet</span> <span class="hljs-variable">httpGet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpGet</span>(uriBuilder.build());<br>            <span class="hljs-type">CloseableHttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.execute(httpGet);<br>            <span class="hljs-type">HttpEntity</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> response.getEntity();<br>            <span class="hljs-keyword">return</span> EntityUtils.toString(entity);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException | URISyntaxException e) &#123;<br>            e.printStackTrace();<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml">6. pom依赖<br><br>```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>httpclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.5.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>未分类</category>
      
    </categories>
    
    
    <tags>
      
      <tag>第三方登录</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>滑动窗口</title>
    <link href="/2022/10/15/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/"/>
    <url>/2022/10/15/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/</url>
    
    <content type="html"><![CDATA[<h3 id="题目描述">题目描述</h3><p>给定一个大小为 <span class="math inline">\(n \le 10^6\)</span>的数组。</p><p>有一个大小为 <span class="math inline">\(k\)</span>的滑动窗口，它从数组的最左边移动到最右边。</p><p>你只能在窗口中看到 <span class="math inline">\(k\)</span>个数字。</p><p>每次滑动窗口向右移动一个位置。</p><p>以下是一个例子：</p><p>该数组为 <code>[1 3 -1 -3 5 3 6 7]</code>，<spanclass="math inline">\(k\)</span> 为 <spanclass="math inline">\(3\)</span>。</p><table><thead><tr class="header"><th style="text-align: center;">窗口位置</th><th style="text-align: center;">最小值</th><th style="text-align: center;">最大值</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">[1 3 -1] -3 5 3 6 7</td><td style="text-align: center;">-1</td><td style="text-align: center;">3</td></tr><tr class="even"><td style="text-align: center;">1 [3 -1 -3] 5 3 6 7</td><td style="text-align: center;">-3</td><td style="text-align: center;">3</td></tr><tr class="odd"><td style="text-align: center;">1 3 [-1 -3 5] 3 6 7</td><td style="text-align: center;">-3</td><td style="text-align: center;">5</td></tr><tr class="even"><td style="text-align: center;">1 3 -1 [-3 5 3] 6 7</td><td style="text-align: center;">-3</td><td style="text-align: center;">5</td></tr><tr class="odd"><td style="text-align: center;">1 3 -1 -3 [5 3 6] 7</td><td style="text-align: center;">3</td><td style="text-align: center;">6</td></tr><tr class="even"><td style="text-align: center;">1 3 -1 -3 5 [3 6 7]</td><td style="text-align: center;">3</td><td style="text-align: center;">7</td></tr></tbody></table><p>你的任务是确定滑动窗口位于每个位置时，窗口中的最大值和最小值。</p><h4 id="输入格式">输入格式</h4><p>输入包含两行。</p><p>第一行包含两个整数 <span class="math inline">\(n\)</span> 和 <spanclass="math inline">\(k\)</span>，分别代表数组长度和滑动窗口的长度。</p><p>第二行有 <span class="math inline">\(n\)</span>个整数，代表数组的具体数值。</p><p>同行数据之间用空格隔开。</p><h4 id="输出格式">输出格式</h4><p>输出包含两个。</p><p>第一行输出，从左至右，每个位置滑动窗口中的最小值。</p><p>第二行输出，从左至右，每个位置滑动窗口中的最大值。</p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">8 31 3 -1 -3 5 3 6 7</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">-1 -3 -3 -3 3 33 3 5 5 6 7</code></pre><hr /><h3 id="算法">算法</h3><h4 id="滑动窗口">(滑动窗口)</h4><p>题目中提到了滑动窗口，我们先以示例为例看下什么是滑动窗口？在示例中，我们从数组中第一个元素开始遍历，由于窗口的大小是3，因此当遍历到第三个元素时，窗口就形成了。</p><figure><imgsrc="https://cdn.acwing.com/media/article/image/2022/10/15/72081_bd3793834c-55289_d0038f6a9c-单调对累.png"alt="55289_d0038f6a9c-单调对累.png" /><figcaptionaria-hidden="true">55289_d0038f6a9c-单调对累.png</figcaption></figure><p>之后，继续遍历元素时，为了保持窗口的大小为3，左侧元素就需要从窗口中剔除。这样使得窗口一直在向右移动，直到考察到最后一个元素结束，这就是所谓的滑动窗口。</p><figure><imgsrc="https://cdn.acwing.com/media/article/image/2022/10/15/72081_b8d05fbb4c-55289_0923cf569c-滑动窗口.PNG"alt="55289_0923cf569c-滑动窗口.PNG" /><figcaptionaria-hidden="true">55289_0923cf569c-滑动窗口.PNG</figcaption></figure><h4 id="解题思路以最大值为例">解题思路（以最大值为例）：</h4><p>由于我们需要求出的是滑动窗口的最大值。</p><p>如果当前的滑动窗口中有两个下标 i 和 j，其中i在j的左侧（i&lt;j），并且i对应的元素不大于j对应的元素（nums[i]≤nums[j]），则：</p><p>当滑动窗口向右移动时，只要 i 还在窗口中，那么 j一定也还在窗口中。这是由于 i 在 j 的左侧所保证的。</p><p>因此，由于 nums[j] 的存在，nums[i]一定不会是滑动窗口中的最大值了，我们可以将nums[i]永久地移除。</p><p>因此我们可以使用一个队列存储所有还没有被移除的下标。在队列中，这些下标按照从小到大的顺序被存储，并且它们在数组nums中对应的值是严格单调递减的。</p><p>当滑动窗口向右移动时，我们需要把一个新的元素放入队列中。</p><p>为了保持队列的性质，我们会不断地将新的元素与队尾的元素相比较，如果新元素大于等于队尾元素，那么队尾的元素就可以被永久地移除，我们将其弹出队列。我们需要不断地进行此项操作，直到队列为空或者新的元素小于队尾的元素。</p><p>由于队列中下标对应的元素是严格单调递减的，因此此时队首下标对应的元素就是滑动窗口中的最大值。</p><p>窗口向右移动的时候。因此我们还需要不断从队首弹出元素保证队列中的所有元素都是窗口中的，因此当队头元素在窗口的左边的时候，弹出队头。</p><h4 id="java代码">Java代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        Deque&lt;Integer&gt; de = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(System.out));<br>        String[] str = br.readLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(str[<span class="hljs-number">0</span>]);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> Integer.parseInt(str[<span class="hljs-number">1</span>]);<br>        String[] s = br.readLine().split(<span class="hljs-string">&quot; &quot;</span>);<br><br>        <span class="hljs-type">int</span> []a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            a[i] = Integer.parseInt(s[i - <span class="hljs-number">1</span>]);<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">while</span>(de.size() &gt; <span class="hljs-number">0</span> &amp;&amp; de.peekLast() &gt; a[i]) &#123;<br>                de.pollLast();<br>            &#125;<br>            de.offerLast(a[i]);<br>            <span class="hljs-keyword">if</span>(i - k &gt;= <span class="hljs-number">1</span> &amp;&amp; de.peekFirst() == a[i-k])&#123;<br>                de.pollFirst();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(i &gt;= k)&#123;<br>                bw.write(de.peekFirst() + <span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>        &#125;<br>        bw.write(<span class="hljs-string">&quot;\n&quot;</span>);<br>        de.clear();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">while</span>(de.size() &gt; <span class="hljs-number">0</span> &amp;&amp; de.peekLast() &lt; a[i]) &#123;<br>                de.pollLast();<br>            &#125;<br>            de.offerLast(a[i]);<br>            <span class="hljs-keyword">if</span>(i - k &gt;= <span class="hljs-number">1</span> &amp;&amp; de.peekFirst() == a[i-k])&#123;<br>                de.pollFirst();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(i &gt;= k)&#123;<br>                bw.write(de.peekFirst() + <span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>        &#125;<br>        bw.flush();<br>        br.close();<br>        bw.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>滑动窗口</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>单调栈</title>
    <link href="/2022/10/13/%E5%8D%95%E8%B0%83%E6%A0%88/"/>
    <url>/2022/10/13/%E5%8D%95%E8%B0%83%E6%A0%88/</url>
    
    <content type="html"><![CDATA[<h3 id="题目描述">题目描述</h3><p>给定一个长度为 <span class="math inline">\(N\)</span>的整数数列，输出每个数左边第一个比它小的数，如果不存在则输出 <spanclass="math inline">\(-1\)</span>。</p><h4 id="输入格式">输入格式</h4><p>第一行包含整数 <spanclass="math inline">\(N\)</span>，表示数列长度。</p><p>第二行包含 <span class="math inline">\(N\)</span>个整数，表示整数数列。</p><h4 id="输出格式">输出格式</h4><p>共一行，包含 <span class="math inline">\(N\)</span> 个整数，其中第<span class="math inline">\(i\)</span> 个数表示第 <spanclass="math inline">\(i\)</span>个数的左边第一个比它小的数，如果不存在则输出 <spanclass="math inline">\(-1\)</span>。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le N \le 10^5\)</span><br /><span class="math inline">\(1 \le 数列中元素 \le 10^9\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">53 4 2 7 5</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">-1 3 -1 2 2</code></pre><hr /><h3 id="算法">算法</h3><h4 id="单调栈">(单调栈)</h4><figure><imgsrc="https://cdn.acwing.com/media/article/image/2022/10/13/72081_a403d75b4a-20201211221031165.gif"alt="20201211221031165.gif" /><figcaption aria-hidden="true">20201211221031165.gif</figcaption></figure><h4 id="section"></h4><h4 id="java-代码">Java 代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> in.nextInt();<br><br>        Stack&lt;Integer&gt; st = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>        <span class="hljs-keyword">while</span>(n-- &gt; <span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> in.nextInt();<br>            <span class="hljs-keyword">while</span>(st.size() &gt; <span class="hljs-number">0</span> &amp;&amp; st.peek() &gt;= x) st.pop();<br>            <span class="hljs-keyword">if</span>(st.size() == <span class="hljs-number">0</span>) System.out.print(-<span class="hljs-number">1</span> + <span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-keyword">else</span> System.out.print(st.peek() + <span class="hljs-string">&quot; &quot;</span>);<br>            st.push(x);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>栈</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>表达式求值</title>
    <link href="/2022/10/12/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC/"/>
    <url>/2022/10/12/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC/</url>
    
    <content type="html"><![CDATA[<h3 id="题目描述">题目描述</h3><p>给定一个表达式，其中运算符仅包含 <code>+,-,*,/</code>（加 减 乘整除），可能包含括号，请你求出表达式的最终值。</p><p><strong>注意：</strong></p><ul><li>数据保证给定的表达式合法。</li><li>题目保证符号 <code>-</code>只作为减号出现，不会作为负号出现，例如，<code>-1+2</code>,<code>(2+2)*(-(1+1)+2)</code>之类表达式均不会出现。</li><li>题目保证表达式中所有数字均为正整数。</li><li>题目保证表达式在中间计算过程以及结果中，均不超过 <spanclass="math inline">\(2^{31}-1\)</span>。</li><li>题目中的整除是指向 <span class="math inline">\(0\)</span>取整，也就是说对于大于 <span class="math inline">\(0\)</span>的结果向下取整，例如 <spanclass="math inline">\(5/3=1\)</span>，对于小于 <spanclass="math inline">\(0\)</span> 的结果向上取整，例如 <spanclass="math inline">\(5/(1-4) = -1\)</span>。</li><li>C++和Java中的整除默认是向零取整；Python中的整除<code>//</code>默认向下取整，因此Python的<code>eval()</code>函数中的整除也是向下取整，在本题中不能直接使用。</li></ul><h4 id="输入格式">输入格式</h4><p>共一行，为给定表达式。</p><h4 id="输出格式">输出格式</h4><p>共一行，为表达式的结果。</p><h4 id="数据范围">数据范围</h4><p>表达式的长度不超过 <span class="math inline">\(10^5\)</span>。</p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">(2+2)*(1+1)</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">8</code></pre><hr /><h3 id="算法">算法</h3><h4 id="栈">(栈)</h4><p><imgsrc="https://cdn.acwing.com/media/article/image/2022/01/13/57632_62c6e14674-day4.png" /></p><h4 id="java-代码">Java 代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Stack&lt;Integer&gt; num = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Stack&lt;Character&gt; op = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eval</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> num.pop();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> num.pop();<br>        <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> op.pop();<br>        <span class="hljs-type">int</span> x;<br>        <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&#x27;+&#x27;</span>)x = a + b;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&#x27;-&#x27;</span>) x = b - a;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&#x27;*&#x27;</span>) x = a * b;<br>        <span class="hljs-keyword">else</span> x = b/a;<br>        num.push(x);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[]args)</span><span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> in.next();<br>        Map&lt;Character,Integer&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        map.put(<span class="hljs-string">&#x27;+&#x27;</span>,<span class="hljs-number">1</span>);<br>        map.put(<span class="hljs-string">&#x27;-&#x27;</span>,<span class="hljs-number">1</span>);<br>        map.put(<span class="hljs-string">&#x27;*&#x27;</span>,<span class="hljs-number">2</span>);<br>        map.put(<span class="hljs-string">&#x27;/&#x27;</span>,<span class="hljs-number">2</span>);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; str.length(); i++)&#123;<br>            <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> str.charAt(i);<br>            <span class="hljs-keyword">if</span>(Character.isDigit(c) )&#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i;<br>                <span class="hljs-keyword">while</span>(j &lt; str.length() &amp;&amp; Character.isDigit(str.charAt(j)))&#123;<br>                    x = x * <span class="hljs-number">10</span> + str.charAt(j) - <span class="hljs-string">&#x27;0&#x27;</span>;<br>                    j++;<br>                &#125;<br>                i = j - <span class="hljs-number">1</span>;<br>                num.push(x);<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&#x27;(&#x27;</span>)op.push(c);<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&#x27;)&#x27;</span>)&#123;<br>                <span class="hljs-keyword">while</span>(op.peek() != <span class="hljs-string">&#x27;(&#x27;</span>) eval();<br>                op.pop();<br>            &#125;<br>            <span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-keyword">while</span>(op.size() &gt; <span class="hljs-number">0</span> &amp;&amp; op.peek() != <span class="hljs-string">&#x27;(&#x27;</span> &amp;&amp; map.get(op.peek()) &gt;= map.get(str.charAt(i))) eval();<br>                op.push(c);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">while</span>(op.size() &gt; <span class="hljs-number">0</span>)eval();<br>        System.out.println(num.peek());<br>    &#125;    <br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>栈</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>二进制中1的个数</title>
    <link href="/2022/10/11/%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%B8%AD1%E7%9A%84%E4%B8%AA%E6%95%B0/"/>
    <url>/2022/10/11/%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%B8%AD1%E7%9A%84%E4%B8%AA%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h3 id="题目描述">题目描述</h3><p>给定一个长度为 <span class="math inline">\(n\)</span>的数列，请你求出数列中每个数的二进制表示中 <spanclass="math inline">\(1\)</span> 的个数。</p><h4 id="输入格式">输入格式</h4><p>第一行包含整数 <span class="math inline">\(n\)</span>。</p><p>第二行包含 <span class="math inline">\(n\)</span>个整数，表示整个数列。</p><h4 id="输出格式">输出格式</h4><p>共一行，包含 <span class="math inline">\(n\)</span> 个整数，其中的第<span class="math inline">\(i\)</span> 个数表示数列中的第 <spanclass="math inline">\(i\)</span> 个数的二进制表示中 <spanclass="math inline">\(1\)</span> 的个数。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le n \le 100000\)</span>,<br /><span class="math inline">\(0 \le 数列中元素的值 \le 10^9\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">51 2 3 4 5</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">1 1 2 1 2</code></pre><hr /><h3 id="算法">算法</h3><h4 id="暴力枚举-o32n">(暴力枚举) <spanclass="math inline">\(O(32n)\)</span></h4><p>x &amp; 1得到x最后一位的二进制数字，所以对于任意数x,每次往右移动一位，判断其最后一位是否为1,int为32位，移动三十二次即可</p><h5 id="java-代码">Java 代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)&#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> in.nextInt();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span>((num &gt;&gt; k) != <span class="hljs-number">0</span>)&#123;<br>                <span class="hljs-keyword">if</span>((num &gt;&gt; k &amp; <span class="hljs-number">1</span>) == <span class="hljs-number">1</span>)&#123;<br>                    res++;<br>                &#125;<br>                k ++;<br>            &#125;<br>            System.out.print(res+<span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="lowbit">(lowbit)</h4><blockquote><p>lowbit原理根据计算机负数表示的特点，如一个数字原码是10001000，他的负数表示形势是补码，就是反码+1，反码是01110111，加一则是01111000，二者按位与得到了1000，就是我们想要的lowbit操作</p></blockquote><p>所以x&amp;-x 得到最后一位1</p><h5 id="java代码">Java代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lowbit</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span>&#123;<br>        <span class="hljs-keyword">return</span> x &amp; -x;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)&#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> in.nextInt();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>            <span class="hljs-keyword">while</span>((num !=<span class="hljs-number">0</span> ))&#123;<br>                num -= lowbit(num);<br>                res++;<br><br>            &#125;<br>            System.out.print(res+<span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>位运算</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>websocket教程</title>
    <link href="/2022/10/11/websocket%E6%95%99%E7%A8%8B/"/>
    <url>/2022/10/11/websocket%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="一为什么需要-websocket">一、为什么需要 WebSocket？</h2><p>初次接触 WebSocket 的人，都会问同样的问题：我们已经有了 HTTP协议，为什么还需要另一个协议？它能带来什么好处？</p><p>答案很简单，因为 HTTP 协议有一个缺陷：通信只能由客户端发起。</p><p>举例来说，我们想了解今天的天气，只能是客户端向服务器发出请求，服务器返回查询结果。HTTP协议做不到服务器主动向客户端推送信息。</p><p><imgsrc="https://www.ruanyifeng.com/blogimg/asset/2017/bg2017051507.jpg" /></p><p>这种单向请求的特点，注定了如果服务器有连续的状态变化，客户端要获知就非常麻烦。我们只能使用<ahref="https://www.pubnub.com/blog/2014-12-01-http-long-polling/">"轮询"</a>：每隔一段时候，就发出一个询问，了解服务器有没有新的信息。最典型的场景就是聊天室。</p><p>轮询的效率低，非常浪费资源（因为必须不停连接，或者 HTTP连接始终打开）。因此，工程师们一直在思考，有没有更好的方法。WebSocket就是这样发明的。</p><h2 id="二简介">二、简介</h2><p>WebSocket协议在2008年诞生，2011年成为国际标准。所有浏览器都已经支持了。</p><p>它的最大特点就是，服务器可以主动向客户端推送信息，客户端也可以主动向服务器发送信息，是真正的双向平等对话，属于<ahref="https://en.wikipedia.org/wiki/Push_technology">服务器推送技术</a>的一种。</p><p><imgsrc="https://www.ruanyifeng.com/blogimg/asset/2017/bg2017051502.png" /></p><p>其他特点包括：</p><p>（1）建立在 TCP 协议之上，服务器端的实现比较容易。</p><p>（2）与 HTTP协议有着良好的兼容性。默认端口也是80和443，并且握手阶段采用 HTTP协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。</p><p>（3）数据格式比较轻量，性能开销小，通信高效。</p><p>（4）可以发送文本，也可以发送二进制数据。</p><p>（5）没有同源限制，客户端可以与任意服务器通信。</p><p>（6）协议标识符是<code>ws</code>（如果加密，则为<code>wss</code>），服务器网址就是URL。</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markup">ws://example.com:80/some/path<br></code></pre></td></tr></table></figure></blockquote><p><imgsrc="https://www.ruanyifeng.com/blogimg/asset/2017/bg2017051503.jpg" /></p><h2 id="三客户端的简单示例">三、客户端的简单示例</h2><p>WebSocket 的用法相当简单。</p><p>下面是一个网页脚本的例子（点击<ahref="http://jsbin.com/muqamiqimu/edit?js,console">这里</a>看运行结果），基本上一眼就能明白。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">&quot;wss://echo.websocket.org&quot;</span>);<br><br>ws.<span class="hljs-property">onopen</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) &#123; <br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Connection open ...&quot;</span>); <br>  ws.<span class="hljs-title function_">send</span>(<span class="hljs-string">&quot;Hello WebSockets!&quot;</span>);<br>&#125;;<br><br>ws.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>( <span class="hljs-string">&quot;Received Message: &quot;</span> + evt.<span class="hljs-property">data</span>);<br>  ws.<span class="hljs-title function_">close</span>();<br>&#125;;<br><br>ws.<span class="hljs-property">onclose</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Connection closed.&quot;</span>);<br>&#125;;      <br></code></pre></td></tr></table></figure></blockquote><h2 id="四客户端的-api">四、客户端的 API</h2><p>WebSocket 客户端的 API 如下。</p><h3 id="websocket-构造函数">4.1 WebSocket 构造函数</h3><p>WebSocket 对象作为一个构造函数，用于新建 WebSocket 实例。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">&#x27;ws://localhost:8080&#x27;</span>);<br></code></pre></td></tr></table></figure></blockquote><p>执行上面语句之后，客户端就会与服务器进行连接。</p><p>实例对象的所有属性和方法清单，参见<ahref="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket">这里</a>。</p><h3 id="websocket.readystate">4.2 webSocket.readyState</h3><p><code>readyState</code>属性返回实例对象的当前状态，共有四种。</p><blockquote><ul><li>CONNECTING：值为0，表示正在连接。</li><li>OPEN：值为1，表示连接成功，可以通信了。</li><li>CLOSING：值为2，表示连接正在关闭。</li><li>CLOSED：值为3，表示连接已经关闭，或者打开连接失败。</li></ul></blockquote><p>下面是一个示例。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">switch</span> (ws.<span class="hljs-property">readyState</span>) &#123;<br>  <span class="hljs-keyword">case</span> <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">CONNECTING</span>:<br>    <span class="hljs-comment">// do something</span><br>    <span class="hljs-keyword">break</span>;<br>  <span class="hljs-keyword">case</span> <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span>:<br>    <span class="hljs-comment">// do something</span><br>    <span class="hljs-keyword">break</span>;<br>  <span class="hljs-keyword">case</span> <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">CLOSING</span>:<br>    <span class="hljs-comment">// do something</span><br>    <span class="hljs-keyword">break</span>;<br>  <span class="hljs-keyword">case</span> <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">CLOSED</span>:<br>    <span class="hljs-comment">// do something</span><br>    <span class="hljs-keyword">break</span>;<br>  <span class="hljs-attr">default</span>:<br>    <span class="hljs-comment">// this never happens</span><br>    <span class="hljs-keyword">break</span>;<br>&#125;<br></code></pre></td></tr></table></figure></blockquote><h3 id="websocket.onopen">4.3 webSocket.onopen</h3><p>实例对象的<code>onopen</code>属性，用于指定连接成功后的回调函数。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">ws.<span class="hljs-property">onopen</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  ws.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Hello Server!&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></blockquote><p>如果要指定多个回调函数，可以使用<code>addEventListener</code>方法。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;open&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>  ws.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Hello Server!&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure></blockquote><h3 id="websocket.onclose">4.4 webSocket.onclose</h3><p>实例对象的<code>onclose</code>属性，用于指定连接关闭后的回调函数。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript">ws.<span class="hljs-property">onclose</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-keyword">var</span> code = event.<span class="hljs-property">code</span>;<br>  <span class="hljs-keyword">var</span> reason = event.<span class="hljs-property">reason</span>;<br>  <span class="hljs-keyword">var</span> wasClean = event.<span class="hljs-property">wasClean</span>;<br>  <span class="hljs-comment">// handle close event</span><br>&#125;;<br><br>ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;close&quot;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-keyword">var</span> code = event.<span class="hljs-property">code</span>;<br>  <span class="hljs-keyword">var</span> reason = event.<span class="hljs-property">reason</span>;<br>  <span class="hljs-keyword">var</span> wasClean = event.<span class="hljs-property">wasClean</span>;<br>  <span class="hljs-comment">// handle close event</span><br>&#125;);<br></code></pre></td></tr></table></figure></blockquote><h3 id="websocket.onmessage">4.5 webSocket.onmessage</h3><p>实例对象的<code>onmessage</code>属性，用于指定收到服务器数据后的回调函数。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript">ws.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-keyword">var</span> data = event.<span class="hljs-property">data</span>;<br>  <span class="hljs-comment">// 处理数据</span><br>&#125;;<br><br>ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-keyword">var</span> data = event.<span class="hljs-property">data</span>;<br>  <span class="hljs-comment">// 处理数据</span><br>&#125;);<br></code></pre></td></tr></table></figure></blockquote><p>注意，服务器数据可能是文本，也可能是二进制数据（<code>blob</code>对象或<code>Arraybuffer</code>对象）。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript">ws.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)&#123;<br>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> event.<span class="hljs-property">data</span> === <span class="hljs-title class_">String</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Received data string&quot;</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">if</span>(event.<span class="hljs-property">data</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">ArrayBuffer</span>)&#123;<br>    <span class="hljs-keyword">var</span> buffer = event.<span class="hljs-property">data</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Received arraybuffer&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></blockquote><p>除了动态判断收到的数据类型，也可以使用<code>binaryType</code>属性，显式指定收到的二进制数据类型。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 收到的是 blob 数据</span><br>ws.<span class="hljs-property">binaryType</span> = <span class="hljs-string">&quot;blob&quot;</span>;<br>ws.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">size</span>);<br>&#125;;<br><br><span class="hljs-comment">// 收到的是 ArrayBuffer 数据</span><br>ws.<span class="hljs-property">binaryType</span> = <span class="hljs-string">&quot;arraybuffer&quot;</span>;<br>ws.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">byteLength</span>);<br>&#125;;<br></code></pre></td></tr></table></figure></blockquote><h3 id="websocket.send">4.6 webSocket.send()</h3><p>实例对象的<code>send()</code>方法用于向服务器发送数据。</p><p>发送文本的例子。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">ws.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;your message&#x27;</span>);<br></code></pre></td></tr></table></figure></blockquote><p>发送 Blob 对象的例子。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> file = <span class="hljs-variable language_">document</span><br>  .<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;input[type=&quot;file&quot;]&#x27;</span>)<br>  .<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];<br>ws.<span class="hljs-title function_">send</span>(file);<br></code></pre></td></tr></table></figure></blockquote><p>发送 ArrayBuffer 对象的例子。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// Sending canvas ImageData as ArrayBuffer</span><br><span class="hljs-keyword">var</span> img = canvas_context.<span class="hljs-title function_">getImageData</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">400</span>, <span class="hljs-number">320</span>);<br><span class="hljs-keyword">var</span> binary = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(img.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; img.<span class="hljs-property">data</span>.<span class="hljs-property">length</span>; i++) &#123;<br>  binary[i] = img.<span class="hljs-property">data</span>[i];<br>&#125;<br>ws.<span class="hljs-title function_">send</span>(binary.<span class="hljs-property">buffer</span>);<br></code></pre></td></tr></table></figure></blockquote><h3 id="websocket.bufferedamount">4.7 webSocket.bufferedAmount</h3><p>实例对象的<code>bufferedAmount</code>属性，表示还有多少字节的二进制数据没有发送出去。它可以用来判断发送是否结束。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">10000000</span>);<br>socket.<span class="hljs-title function_">send</span>(data);<br><br><span class="hljs-keyword">if</span> (socket.<span class="hljs-property">bufferedAmount</span> === <span class="hljs-number">0</span>) &#123;<br>  <span class="hljs-comment">// 发送完毕</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-comment">// 发送还没结束</span><br>&#125;<br></code></pre></td></tr></table></figure></blockquote><h3 id="websocket.onerror">4.8 webSocket.onerror</h3><p>实例对象的<code>onerror</code>属性，用于指定报错时的回调函数。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">socket.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-comment">// handle error event</span><br>&#125;;<br><br>socket.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;error&quot;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-comment">// handle error event</span><br>&#125;);<br></code></pre></td></tr></table></figure></blockquote><h2 id="五服务端的实现">五、服务端的实现</h2><p>WebSocket 服务器的实现，可以查看维基百科的<ahref="https://en.wikipedia.org/wiki/Comparison_of_WebSocket_implementations">列表</a>。</p><p>常用的 Node 实现有以下三种。</p><ul><li><ahref="https://github.com/uWebSockets/uWebSockets">µWebSockets</a></li><li><a href="http://socket.io/">Socket.IO</a></li><li><ahref="https://github.com/theturtle32/WebSocket-Node">WebSocket-Node</a></li></ul><p>具体的用法请查看它们的文档，这里不详细介绍了。</p><h2 id="六websocketd">六、WebSocketd</h2><p>下面，我要推荐一款非常特别的 WebSocket 服务器：<ahref="http://websocketd.com/">Websocketd</a>。</p><p>它的最大特点，就是后台脚本不限语言，标准输入（stdin）就是 WebSocket的输入，标准输出（stdout）就是 WebSocket 的输出。</p><p><imgsrc="https://www.ruanyifeng.com/blogimg/asset/2017/bg2017051504.png" /></p><p>举例来说，下面是一个 Bash 脚本<code>counter.sh</code>。</p><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-built_in">echo</span> 1<br><span class="hljs-built_in">sleep</span> 1<br><br><span class="hljs-built_in">echo</span> 2<br><span class="hljs-built_in">sleep</span> 1<br><br><span class="hljs-built_in">echo</span> 3<br></code></pre></td></tr></table></figure></blockquote><p>命令行下运行这个脚本，会输出1、2、3，每个值之间间隔1秒。</p><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ bash ./counter.sh<br>1<br>2<br>3<br></code></pre></td></tr></table></figure></blockquote><p>现在，启动<code>websocketd</code>，指定这个脚本作为服务。</p><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ websocketd --port=8080 bash ./counter.sh<br></code></pre></td></tr></table></figure></blockquote><p>上面的命令会启动一个 WebSocket服务器，端口是<code>8080</code>。每当客户端连接这个服务器，就会执行<code>counter.sh</code>脚本，并将它的输出推送给客户端。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">&#x27;ws://localhost:8080/&#x27;</span>);<br><br>ws.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">data</span>);<br>&#125;;<br></code></pre></td></tr></table></figure></blockquote><p>上面是客户端的 JavaScript代码，运行之后会在控制台依次输出1、2、3。</p><p>有了它，就可以很方便地将命令行的输出，发给浏览器。</p><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ websocketd --port=8080 <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure></blockquote><p>上面的命令会执行<code>ls</code>命令，从而将当前目录的内容，发给浏览器。使用这种方式实时监控服务器，简直是轻而易举（<ahref="https://github.com/joewalnes/web-vmstats">代码</a>）。</p><p><imgsrc="https://www.ruanyifeng.com/blogimg/asset/2017/bg2017051505.jpg" /></p><p>更多的用法可以参考<ahref="https://github.com/joewalnes/websocketd/tree/master/examples/bash">官方示例</a>。</p><blockquote><ul><li>Bash 脚本<ahref="https://github.com/joewalnes/websocketd/blob/master/examples/bash/greeter.sh">读取客户端输入</a>的例子</li><li>五行代码实现一个最简单的<ahref="https://github.com/joewalnes/websocketd/blob/master/examples/bash/chat.sh">聊天服务器</a></li></ul></blockquote><p><imgsrc="https://www.ruanyifeng.com/blogimg/asset/2017/bg2017051506.png" /></p><p>websocketd 的实质，就是命令行的 WebSocket代理。只要命令行可以执行的程序，都可以通过它与浏览器进行 WebSocket通信。下面是一个 Node 实现的回声服务<ahref="https://github.com/joewalnes/websocketd/blob/master/examples/nodejs/greeter.js"><code>greeter.js</code></a>。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">process.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">setEncoding</span>(<span class="hljs-string">&#x27;utf8&#x27;</span>);<br><br>process.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;readable&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> chunk = process.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">read</span>();<br>  <span class="hljs-keyword">if</span> (chunk !== <span class="hljs-literal">null</span>) &#123;<br>    process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">&#x27;data: &#x27;</span> + chunk);<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure></blockquote><p>启动这个脚本的命令如下。</p><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ websocketd --port=8080 node ./greeter.js<br></code></pre></td></tr></table></figure></blockquote><p>官方仓库还有其他<ahref="https://github.com/joewalnes/websocketd/tree/master/examples">各种语言</a>的例子。</p><blockquote><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>本文转自<ahref="https://www.ruanyifeng.com/blog/2017/05/websocket.html">WebSocket教程 - 阮一峰的网络日志 (ruanyifeng.com)</a><a href="#fnref:1" rev="footnote" class="footnote-backref">↩︎</a></span></span></li></ol></div></section></blockquote>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web</tag>
      
      <tag>网路协议</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>requestAnimationFrame函数</title>
    <link href="/2022/10/11/requestAnimationFrame%E5%87%BD%E6%95%B0/"/>
    <url>/2022/10/11/requestAnimationFrame%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<p>在Web应用中，实现动画效果的方法比较多，Javascript 中可以通过定时器<code>setTimeout</code> 来实现，css3 可以使用 <code>transition</code> 和<code>animation</code> 来实现，html5 中的 canvas也可以实现。除此之外，html5 还提供一个专门用于请求动画的API，那就是<code>requestAnimationFrame</code>，顾名思义就是<strong>请求动画帧。</strong> </p><h2 id="一相关概念">一、相关概念</h2><p>为了理解 <code>requestAnimationFrame</code>背后的原理，我们首先需要了解一下与之相关的几个概念：</p><h3 id="页面可见">1.  页面可见</h3><p>   当页面被最小化或者被切换成后台标签页时，页面为不可见，浏览器会触发一个<code>visibilitychange</code>事件,并设置<code>document.hidden</code>属性为<code>true</code>；切换到显示状态时，页面为可见，也同样触发一个<code>visibilitychange</code>事件，设置<code>document.hidden</code>属性为<code>false</code>。</p><h3 id="动画帧请求回调函数列表">2.  动画帧请求回调函数列表</h3><p>   每个Document都有一个动画帧请求回调函数列表，该列表可以看成是由<code>&lt;handlerId, callback&gt;</code>元组组成的集合。其中<code>handlerId</code>是一个整数，唯一地标识了元组在列表中的位置；<code>callback是</code>回调函数。</p><h3 id="屏幕刷新频率">3.  屏幕刷新频率</h3><p>   即图像在屏幕上更新的速度，也即屏幕上的图像每秒钟出现的次数，它的单位是赫兹(Hz)。对于一般笔记本电脑，这个频率大概是60Hz，这个值的设定受屏幕分辨率、屏幕尺寸和显卡的影响。</p><h3 id="动画原理">4.  动画原理</h3><p>   根据上面的原理我们知道，你眼前所看到图像正在以每秒60次的频率刷新，由于刷新频率很高，因此你感觉不到它在刷新。而<strong>动画本质就是要让人眼看到图像被刷新而引起变化的视觉效果，这个变化要以连贯的、平滑的方式进行过渡。</strong>那怎么样才能做到这种效果呢？</p><p>   刷新频率为60Hz的屏幕每16.7ms刷新一次，我们在屏幕每次刷新前，将图像的位置向左移动一个像素，即1px。这样一来，屏幕每次刷出来的图像位置都比前一个要差1px，因此你会看到图像在移动；由于我们人眼的视觉停留效应，当前位置的图像停留在大脑的印象还没消失，紧接着图像又被移到了下一个位置，因此你才会看到图像在流畅的移动，这就是视觉效果上形成的动画。</p><h2 id="二-requestanimationframe用法">二、requestAnimationFrame用法</h2><p>异步，传入的函数在重绘之前调用。</p><h3 id="写法handlerid-requestanimationframecallback">1.  写法：handlerId= requestAnimationFrame(callback)</h3><p>(1)  传入一个<code>callback</code>函数，即动画函数;</p><p>(2) 返回值<code>handlerId</code>为浏览器定义的、大于0的整数，唯一标识了该回调函数在列表中位置。</p><h3 id="浏览器执行过程">2.  浏览器执行过程:</h3><p>(1) 首先要判断<code>document.hidden</code>属性是否为<code>true</code>,即页面处于可见状态下才会执行；</p><p>(2)  浏览器清空上一轮的动画函数；</p><p>(3)  这个方法返回的<code>handlerId</code>值会和动画函数<code>callback</code>，以<code>&lt;handlerId , callback&gt;</code>进入到动画帧请求回调函数列；</p><p>(4) 浏览器会遍历动画帧请求回调函数列表，根据<code>handlerId</code> 的值大小，依次去执行相应的动画函数。</p><h3 id="取消动画函数的方法">3.  取消动画函数的方法：</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-built_in">cancelAnimationFrame</span>(handlerId)复制代码<br></code></pre></td></tr></table></figure><h2id="三settimeout与requestanimationframe">三、setTimeout与requestAnimationFrame</h2><h3 id="settimeout">1.  setTimeout</h3><p>    理解了上面的概念以后，我们不难发现，<code>setTimeout</code>其实就是通过设置一个间隔时间来不断的改变图像的位置，从而达到动画效果的。但利用<code>seTimeout</code>实现的动画在某些低端机上会出现卡顿、抖动的现象。这种现象的产生有两个原因：</p><ul><li><code>setTimeout</code>的执行时间并不是确定的。在Javascript中，<code>setTimeout</code>任务被放进了异步队列中，只有当主线程上的任务执行完以后，才会去检查该队列里的任务是否需要开始执行，因此<strong>setTimeout的实际执行时间一般要比其设定的时间晚一些。</strong></li><li>刷新频率受屏幕分辨率和屏幕尺寸的影响，因此不同设备的屏幕刷新频率可能会不同，而<code>setTimeout</code>只能设置一个固定的时间间隔，这个时间不一定和屏幕的刷新时间相同。</li></ul><p>以上两种情况都会导致<code>setTimeout</code>的执行步调和屏幕的刷新步调不一致，从而引起<strong>丢帧</strong>现象。那为什么步调不一致就会引起丢帧呢？</p><p>首先要明白，<strong><code>setTimeout</code>的执行只是在内存中对图像属性进行改变，这个变化必须要等到屏幕下次刷新时才会被更新到屏幕上</strong>。如果两者的步调不一致，就可能会导致中间某一帧的操作被跨越过去，而直接更新下一帧的图像。假设屏幕每隔16.7ms刷新一次，而<code>setTimeout</code>每隔10ms设置图像向左移动1px，就会出现如下绘制过程：</p><ul><li>第0ms: 屏幕未刷新，等待中，<code>setTimeout</code>也未执行，等待中；</li><li>第10ms: 屏幕未刷新，等待中，<code>setTimeout</code>开始执行并设置图像属性left=1px；</li><li>第16.7ms: 屏幕开始刷新，屏幕上的图像向左移动了<strong>1px</strong>，<code>setTimeout</code> 未执行，继续等待中；</li><li>第20ms: 屏幕未刷新，等待中，<code>setTimeout</code>开始执行并设置left=2px;</li><li>第30ms: 屏幕未刷新，等待中，<code>setTimeout</code>开始执行并设置left=3px;</li><li>第33.4ms: 屏幕开始刷新，屏幕上的图像向左移动了<strong>3px</strong>，<code>setTimeout</code>未执行，继续等待中；</li><li>…</li></ul><p>从上面的绘制过程中可以看出，屏幕没有更新left=2px的那一帧画面，图像直接从1px的位置跳到了3px的的位置，这就是丢帧现象，这种现象就会引起动画卡顿。</p><h3 id="requestanimationframe">2.  requestAnimationFrame</h3><p>与<code>setTimeout</code>相比，<code>requestAnimationFrame</code>最大的优势是<strong>由系统来决定回调函数的执行时机。</strong>具体一点讲，如果屏幕刷新率是60Hz,那么回调函数就每16.7ms被执行一次，如果刷新率是75Hz，那么这个时间间隔就变成了1000/75=13.3ms，换句话说就是，<code>requestAnimationFrame</code>的步伐跟着系统的刷新步伐走。<strong>它能保证回调函数在屏幕每一次的刷新间隔中只被执行一次</strong>，这样就不会引起丢帧现象，也不会导致动画出现卡顿的问题。</p><p>这个API的调用很简单，如下所示：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> progress = <span class="hljs-number">0</span>;<br><span class="hljs-comment">//回调函数</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;  <br>  progress += <span class="hljs-number">1</span>; <span class="hljs-comment">//修改图像的位置  </span><br>  <span class="hljs-keyword">if</span> (progress &lt; <span class="hljs-number">100</span>) &#123;  <span class="hljs-comment">//在动画没有结束前，递归渲染    </span><br>    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">requestAnimationFrame</span>(render); <br>  &#125;<br>&#125;<br><span class="hljs-comment">//第一帧渲染</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">requestAnimationFrame</span>(render);复制代码<br></code></pre></td></tr></table></figure><p>除此之外，<code>requestAnimationFrame</code>还有以下两个优势：</p><ul><li><p><strong>CPU节能</strong>：使用<code>setTimeout</code>实现的动画，当页面被隐藏或最小化时，<code>setTimeout</code>仍然在后台执行动画任务，由于此时页面处于不可见或不可用状态，刷新动画是没有意义的，完全是浪费CPU资源。而<code>requestAnimationFrame</code>则完全不同，当页面处理未激活的状态下，该页面的屏幕刷新任务也会被系统暂停，因此跟着系统步伐走的<code>requestAnimationFrame</code>也会停止渲染，当页面被激活时，动画就从上次停留的地方继续执行，有效节省了CPU开销。</p></li><li><p><strong>函数节流</strong>：在高频率事件(<code>resize</code>,<code>scroll</code>等)中，为了防止在一个刷新间隔内发生多次函数执行，使用<code>requestAnimationFrame</code>可保证每个刷新间隔内，函数只被执行一次，这样既能保证流畅性，也能更好的节省函数执行的开销。一个刷新间隔内函数执行多次时没有意义的，因为显示器每16.7ms刷新一次，多次绘制并不会在屏幕上体现出来。</p></li></ul><h3 id="优雅降级">3.  优雅降级</h3><p>   由于<code>requestAnimationFrame</code>目前还存在兼容性问题，而且不同的浏览器还需要带不同的前缀。因此需要通过优雅降级的方式对<code>requestAnimationFrame</code>进行封装，优先使用高级特性，然后再根据不同浏览器的情况进行回退，直至只能使用<code>setTimeout</code>的情况。下面的代码就是有人在github上提供的polyfill，详细介绍请参考github代码<ahref="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdarius%2FrequestAnimationFrame"title="https://github.com/darius/requestAnimationFrame">requestAnimationFrame</a>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Date</span>.<span class="hljs-property">now</span>)<br>    <span class="hljs-title class_">Date</span>.<span class="hljs-property">now</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>(); &#125;;<br><br>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-string">&#x27;use strict&#x27;</span>;<br><br>    <span class="hljs-keyword">var</span> vendors = [<span class="hljs-string">&#x27;webkit&#x27;</span>, <span class="hljs-string">&#x27;moz&#x27;</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; vendors.<span class="hljs-property">length</span> &amp;&amp; !<span class="hljs-variable language_">window</span>.<span class="hljs-property">requestAnimationFrame</span>; ++i) &#123;<br>        <span class="hljs-keyword">var</span> vp = vendors[i];<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-property">requestAnimationFrame</span> = <span class="hljs-variable language_">window</span>[vp+<span class="hljs-string">&#x27;RequestAnimationFrame&#x27;</span>];<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-property">cancelAnimationFrame</span> = (<span class="hljs-variable language_">window</span>[vp+<span class="hljs-string">&#x27;CancelAnimationFrame&#x27;</span>]<br>                                   || <span class="hljs-variable language_">window</span>[vp+<span class="hljs-string">&#x27;CancelRequestAnimationFrame&#x27;</span>]);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/iP(ad|hone|od).*OS 6/</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span>.<span class="hljs-property">userAgent</span>) <span class="hljs-comment">// iOS6 is buggy</span><br>        || !<span class="hljs-variable language_">window</span>.<span class="hljs-property">requestAnimationFrame</span> || !<span class="hljs-variable language_">window</span>.<span class="hljs-property">cancelAnimationFrame</span>) &#123;<br>        <span class="hljs-keyword">var</span> lastTime = <span class="hljs-number">0</span>;<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-property">requestAnimationFrame</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) &#123;<br>            <span class="hljs-keyword">var</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();<br>            <span class="hljs-keyword">var</span> nextTime = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(lastTime + <span class="hljs-number">16</span>, now);<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-title function_">callback</span>(lastTime = nextTime); &#125;,<br>                              nextTime - now);<br>        &#125;;<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-property">cancelAnimationFrame</span> = <span class="hljs-built_in">clearTimeout</span>;<br>    &#125;<br>&#125;());<br>复制代码<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>判断子序列</title>
    <link href="/2022/10/10/%E5%88%A4%E6%96%AD%E5%AD%90%E5%BA%8F%E5%88%97/"/>
    <url>/2022/10/10/%E5%88%A4%E6%96%AD%E5%AD%90%E5%BA%8F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h3 id="题目描述">题目描述</h3><p>给定一个长度为 <span class="math inline">\(n\)</span> 的整数序列<span class="math inline">\(a_1,a_2,…,a_n\)</span> 以及一个长度为 <spanclass="math inline">\(m\)</span> 的整数序列 <spanclass="math inline">\(b_1,b_2,…,b_m\)</span>。</p><p>请你判断 <span class="math inline">\(a\)</span> 序列是否为 <spanclass="math inline">\(b\)</span> 序列的子序列。</p><p>子序列指序列的一部分项按<strong>原有次序排列</strong>而得的序列，例如序列<span class="math inline">\(\\{a_1,a_3,a5\\}\)</span> 是序列 <spanclass="math inline">\(\\{a_1,a_2,a_3,a_4,a_5\\}\)</span>的一个子序列。</p><h4 id="输入格式">输入格式</h4><p>第一行包含两个整数 <span class="math inline">\(n,m\)</span>。</p><p>第二行包含 <span class="math inline">\(n\)</span> 个整数，表示 <spanclass="math inline">\(a_1,a_2,…,a_n\)</span>。</p><p>第三行包含 <span class="math inline">\(m\)</span> 个整数，表示 <spanclass="math inline">\(b_1,b_2,…,b_m\)</span>。</p><h4 id="输出格式">输出格式</h4><p>如果 <span class="math inline">\(a\)</span> 序列是 <spanclass="math inline">\(b\)</span> 序列的子序列，输出一行<code>Yes</code>。</p><p>否则，输出 <code>No</code>。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le n \le m \le 10^5\)</span>,<br /><span class="math inline">\(-10^9 \le a_i,b_i \le 10^9\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">3 51 3 51 2 3 4 5</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">Yes</code></pre><hr /><h3 id="算法">算法</h3><h4 id="双指针-onm">(双指针) <spanclass="math inline">\(O(n+m)\)</span></h4><ol type="1"><li><p>j指针用来扫描整个b数组，i指针用来扫描a数组。若发现a[i] ==b[j]，则让i指针后移一位。</p></li><li><p>整个过程中，j指针不断后移，而i指针只有当匹配成功时才后移一位，若最后若i== n，则说明匹配成功。</p></li></ol><p>整个过程中j指针不断扫描b数组并且向后移动，相当于不断给i指针所指向的a数组创建匹配的机会，只有匹配成功时i指针才会向后移动一位，当i== n时，说明全部匹配成功。</p><p><imgsrc="https://img-blog.csdnimg.cn/2021040121250352.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTYyOTI4NQ==,size_16,color_FFFFFF,t_70" /></p><h4 id="java-代码">Java 代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java">my code...<span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> []a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [n+<span class="hljs-number">1</span>];<br>        <span class="hljs-type">int</span> []b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [m+<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br>            a[i] = in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; m; j++)<br>            b[j] = in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; m; j++)&#123;<br>            <span class="hljs-keyword">if</span>(i &lt; n &amp;&amp; a[i] == b[j])<br>                i++;<br>        &#125;<br>        <span class="hljs-keyword">if</span>( i == n)<br>            System.out.println(<span class="hljs-string">&quot;Yes&quot;</span>);<br>        <span class="hljs-keyword">else</span> <br>            System.out.println(<span class="hljs-string">&quot;No&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>双指针</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数组元素目标和</title>
    <link href="/2022/10/06/%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E7%9B%AE%E6%A0%87%E5%92%8C/"/>
    <url>/2022/10/06/%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E7%9B%AE%E6%A0%87%E5%92%8C/</url>
    
    <content type="html"><![CDATA[<p>给定两个升序排序的有序数组 <span class="math inline">\(A\)</span> 和<span class="math inline">\(B\)</span>，以及一个目标值 <spanclass="math inline">\(x\)</span>。</p><p>数组下标从 <span class="math inline">\(0\)</span> 开始。</p><p>请你求出满足 <span class="math inline">\(A[i] + B[j] = x\)</span>的数对 <span class="math inline">\((i, j)\)</span>。</p><p>数据保证有唯一解。</p><h4 id="输入格式">输入格式</h4><p>第一行包含三个整数 <spanclass="math inline">\(n,m,x\)</span>，分别表示 <spanclass="math inline">\(A\)</span> 的长度，<spanclass="math inline">\(B\)</span> 的长度以及目标值 <spanclass="math inline">\(x\)</span>。</p><p>第二行包含 <span class="math inline">\(n\)</span> 个整数，表示数组<span class="math inline">\(A\)</span>。</p><p>第三行包含 <span class="math inline">\(m\)</span> 个整数，表示数组<span class="math inline">\(B\)</span>。</p><h4 id="输出格式">输出格式</h4><p>共一行，包含两个整数 <span class="math inline">\(i\)</span> 和 <spanclass="math inline">\(j\)</span>。</p><h4 id="数据范围">数据范围</h4><p>数组长度不超过 <span class="math inline">\(10^5\)</span>。<br />同一数组内元素各不相同。<br /><span class="math inline">\(1 \le 数组元素 \le 10^9\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">4 5 61 2 4 73 4 6 8 9</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">1 1</code></pre><h3 id="思路">思路：</h3><figure><imgsrc="https://cdn.acwing.com/media/article/image/2020/12/06/2675_d09ec25337-1.png"alt="思路" /><figcaption aria-hidden="true">思路</figcaption></figure><h3 id="java代码">java代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> in.nextInt();<br>        <span class="hljs-type">int</span> []a= <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [n+<span class="hljs-number">1</span>];<br>        <span class="hljs-type">int</span> []b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [m+<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br>            a[i] = in.nextInt();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++)<br>            b[i] = in.nextInt();<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = m - <span class="hljs-number">1</span>; i &lt; n; i++)&#123;<br>            <span class="hljs-keyword">while</span>(a[i] + b[j] &gt; x &amp;&amp; j &gt; <span class="hljs-number">0</span>)<br>                j--;<br>            <span class="hljs-keyword">if</span>(a[i] + b[j] == x)&#123;<br>                System.out.println(i + <span class="hljs-string">&quot; &quot;</span> + j);<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>双指针</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>最长连续不重复子序列</title>
    <link href="/2022/10/06/%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E4%B8%8D%E9%87%8D%E5%A4%8D%E5%AD%90%E5%BA%8F%E5%88%97/"/>
    <url>/2022/10/06/%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E4%B8%8D%E9%87%8D%E5%A4%8D%E5%AD%90%E5%BA%8F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<p>给定一个长度为 <span class="math inline">\(n\)</span>的整数序列，请找出最长的不包含重复的数的连续区间，输出它的长度。</p><h4 id="输入格式">输入格式</h4><p>第一行包含整数 <span class="math inline">\(n\)</span>。</p><p>第二行包含 <span class="math inline">\(n\)</span> 个整数（均在 <spanclass="math inline">\(0 \sim 10^5\)</span> 范围内），表示整数序列。</p><h4 id="输出格式">输出格式</h4><p>共一行，包含一个整数，表示最长的不包含重复的数的连续区间的长度。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le n \le 10^5\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">51 2 2 3 5</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">3</code></pre><h3 id="思路">思路</h3><ol type="1"><li><p>遍历数组a中的每一个元素a[i], 对于每一个i，找到j使得双指针[j,i]维护的是以a[i]结尾的最长连续不重复子序列，长度为i - j + 1,将这一长度与r的较大者更新给r。</p></li><li><p>对于每一个i，如何确定j的位置：由于[j, i -1]是前一步得到的最长连续不重复子序列，所以如果[j,i]中有重复元素，一定是a[i]，因此右移j直到a[i]不重复为止（由于[j, i -1]已经是前一步的最优解，此时j只可能右移以剔除重复元素a[i]，不可能左移增加元素，因此，j具有“单调性”、本题可用双指针降低复杂度）。</p></li><li><p>用数组s记录子序列a[j ~i]中各元素出现次数，遍历过程中对于每一个i有四步操作：cin元素a[i] -&gt;将a[i]出现次数s[a[i]]加1 -&gt; 若a[i]重复则右移j（s[a[j]]要减1） -&gt;确定j及更新当前长度i - j + 1给r。</p></li></ol><h3 id="java代码">java代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> <span class="hljs-number">100010</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[]args)</span>&#123;<br>        <span class="hljs-type">int</span> [] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [N];<br>        <span class="hljs-type">int</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [N];<br>        <span class="hljs-type">int</span> n;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">cin</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        n = cin.nextInt();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)&#123;<br>            a[i] = cin.nextInt();<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>; i &lt; n; i++ )&#123;<br>            b[a[i]] += <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">while</span>(b[a[i]] &gt; <span class="hljs-number">1</span>)&#123;<br>                b[a[j]] -= <span class="hljs-number">1</span>;<br>                j++;<br>            &#125;<br>            res = Math.max(res,i-j+<span class="hljs-number">1</span>);<br>        &#125;<br>        System.out.println(res);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>双指针</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数的范围</title>
    <link href="/2022/10/05/%E6%95%B0%E7%9A%84%E8%8C%83%E5%9B%B4/"/>
    <url>/2022/10/05/%E6%95%B0%E7%9A%84%E8%8C%83%E5%9B%B4/</url>
    
    <content type="html"><![CDATA[<p>给定一个按照升序排列的长度为 <span class="math inline">\(n\)</span>的整数数组，以及 <span class="math inline">\(q\)</span> 个查询。</p><p>对于每个查询，返回一个元素 <span class="math inline">\(k\)</span>的起始位置和终止位置（位置从 <span class="math inline">\(0\)</span>开始计数）。</p><p>如果数组中不存在该元素，则返回 <code>-1 -1</code>。</p><h4 id="输入格式">输入格式</h4><p>第一行包含整数 <span class="math inline">\(n\)</span> 和 <spanclass="math inline">\(q\)</span>，表示数组长度和询问个数。</p><p>第二行包含 <span class="math inline">\(n\)</span> 个整数（均在 <spanclass="math inline">\(1 \sim 10000\)</span> 范围内），表示完整数组。</p><p>接下来 <span class="math inline">\(q\)</span> 行，每行包含一个整数<span class="math inline">\(k\)</span>，表示一个询问元素。</p><h4 id="输出格式">输出格式</h4><p>共 <span class="math inline">\(q\)</span>行，每行包含两个整数，表示所求元素的起始位置和终止位置。</p><p>如果数组中不存在该元素，则返回 <code>-1 -1</code>。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le n \le 100000\)</span><br /><span class="math inline">\(1 \le q \le 10000\)</span><br /><span class="math inline">\(1 \le k \le 10000\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">6 31 2 2 3 3 4345</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">3 45 5-1 -1</code></pre><h3 id="c代码">c++代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e6</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-type">int</span> n,q;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;q);<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;a[i]);<br>&#125;<br><span class="hljs-keyword">while</span>(q--)&#123;<br>    <span class="hljs-type">int</span> k;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;k);<br>    <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>,j=n<span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">while</span>(i&lt;j)<br>    &#123;<br>        <span class="hljs-type">int</span> mid=i+j&gt;&gt;<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span>(a[mid]&gt;=k)j=mid;<br>        <span class="hljs-keyword">else</span> i=mid+<span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(a[i]!=k)cout&lt;&lt;<span class="hljs-number">-1</span>&lt;&lt;<span class="hljs-string">&quot; &quot;</span>&lt;&lt;<span class="hljs-number">-1</span>&lt;&lt;endl;<br>    <span class="hljs-keyword">else</span> &#123;<br>        cout&lt;&lt;i&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>        <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>,j=n<span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">while</span>(i&lt;j)<br>        &#123;<br>            <span class="hljs-type">int</span> mid=i+j+<span class="hljs-number">1</span>&gt;&gt;<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span>(a[mid]&lt;=k)i=mid;<br>            <span class="hljs-keyword">else</span> j=mid<span class="hljs-number">-1</span>;<br>        &#125;<br>        cout&lt;&lt;i&lt;&lt;endl;<br>    &#125;<br>    &#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>二分</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>并发编程技术点(一)</title>
    <link href="/2022/10/03/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF%E7%82%B9(%E4%B8%80)/"/>
    <url>/2022/10/03/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF%E7%82%B9(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<h3id="一什么是进程线程协程他们之间的关系是怎样的">一、什么是进程、线程、协程，他们之间的关系是怎样的</h3><p>进程:本质上是一个独立执行的程序，进程是操作系统进行资源分配和调度的基本概念，操作系统进行资源分配和调度的一个独立单位</p><p>线程:是操作系统能够进行运算调度的最小单位。它被包含在进程之中，是进程中的实际运作单位。一个进程中可以并发多个线程，每条线程执行不同的任务，切换受系统控制。</p><p>协程:又称为微线程，是一种用户态的轻量级线程，协程不像线程和进程需要进行系统内核上的上下文切换，协程的上下文切换是由用户自己决定的，有自己的上下文，所以说是轻量级的线程，也称之为用户级别的线程就叫协程，一个线程可以多个协程,线程进程都是同步机制，而协程则是异步</p><p>Java的原生语法中并没有实现协程,目前python、Lua和GO等语言支持</p><p>关系：一个进程可以有多个线程，它允许计算机同时运行两个或多个程序。线程是进程的最小执行单位，CPU的调度切换的是进程和线程，进程和线程多了之后调度会消耗大量的CPU，CPU上真正运行的是线程，线程可以对应多个协程</p><ul><li><p>协程对于多线程有什么优缺点吗</p><p>优点：</p><pre><code class="hljs">非常快速的上下文切换，不用系统内核的上下文切换，减小开销单线程即可实现高并发，单核CPU可以支持上万的协程由于只有一个线程，也不存在同时写变量的冲突，在协程中控制共享资源不需要加锁</code></pre><p>缺点：</p><pre><code class="hljs">协程无法利用多核资源，本质也是个单线程协程需要和进程配合才能运行在多CPU上目前java没成熟的第三方库，存在风险调试debug存在难度，不利于发现问题</code></pre></li></ul><h3 id="二并发并行的区别">二、并发、并行的区别</h3><p>并发 concurrency： 一台处理器上同时处理任务,这个同时实际上是交替处理多个任务，程序中可以同时拥有两个或者多个线程，当有多个线程在操作时,如果系统只有一个CPU,则它根本不可能真正同时进行一个以上的线程,它只能把CPU运行时间划分成若干个时间段,再将时间段分配给各个线程执行</p><p>并行 parallellism：多个CPU上同时处理多个任务，一个CPU执行一个进程时，另一个CPU可以执行另一个进程，两个进程互不抢占CPU资源，可以同时进行</p><p>并发指在一段时间内宏观上去处理多个任务。并行指同一个时刻，多个任务确实真的同时运行。</p><p>例子：</p><p>并发是一心多用，听课和看电影，但是CPU大脑只有一个，所以轮着来并行：火影忍者中的影分身，有多个你出现，可以分别做不同的事情一个项目经理A和3个程序B C D的故事</p><p>单线程并发：A给B讲完需求，B自己去实现，期间A继续给C和D讲，不用等待某个程序员去完成，期间项目经理没空闲下来</p><p>并行：直接找3个项目经理分别分配给3个程序员</p><h3id="三java多线程的实现方式和区别">三、Java多线程的实现方式和区别</h3><p><strong>简介: Java多线程的实现方式和区别</strong></p><ul><li><p>继承Thread</p></li><li><p>继承Thread，重写里面run方法，创建实例，执行start优点：代码编写最简单直接操作缺点：没返回值，继承一个类后，没法继承其他的类，拓展性差</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java">继承Thread，重写里面run方法，创建实例，执行start<br>优点：代码编写最简单直接操作<br>缺点：没返回值，继承一个类后，没法继承其他的类，拓展性差<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadDemo1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;继承Thread实现多线程，名称：&quot;</span>+Thread.currentThread().getName());<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-type">ThreadDemo1</span> <span class="hljs-variable">threadDemo1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadDemo1</span>();<br>    threadDemo1.setName(<span class="hljs-string">&quot;demo1&quot;</span>);<br>    threadDemo1.start();<br>    System.out.println(<span class="hljs-string">&quot;主线程名称：&quot;</span>+Thread.currentThread().getName());<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>实现Runnable</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">自定义类实现Runnable，实现里面run方法，创建Thread类，使用Runnable接口的实现对象作为参数传递给Thread对象，调用Strat方法<br><br>优点：线程类可以实现多个几接口，可以再继承一个类<br>缺点：没返回值，不能直接启动，需要通过构造一个Thread实例传递进去启动<br></code></pre></td></tr></table></figure><p>public class ThreadDemo2 implements Runnable {</p><pre><code class="hljs">@Overridepublic void run() &#123;    System.out.println(&quot;通过Runnable实现多线程，名称：&quot;+Thread.currentThread().getName());&#125;</code></pre><p>}</p><p>public static void main(String[] args) {</p><pre><code class="hljs">    ThreadDemo2 threadDemo2 = new ThreadDemo2();    Thread thread = new Thread(threadDemo2);    thread.setName(&quot;demo2&quot;);    thread.start();    System.out.println(&quot;主线程名称：&quot;+Thread.currentThread().getName());</code></pre><p>}</p><p>JDK8之后采用lambda表达式 public static void main(String[] args) {</p><pre><code class="hljs">Thread thread = new Thread(()-&gt;&#123;            System.out.println(&quot;通过Runnable实现多线程，名称：&quot;+Thread.currentThread().getName());        &#125;);thread.setName(&quot;demo2&quot;);thread.start();System.out.println(&quot;主线程名称：&quot;+Thread.currentThread().getName());</code></pre><p>}</p></li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">- 通过Callable和FutureTask方式<br><br>```java<br>创建callable接口的实现类，并实现<span class="hljs-keyword">call</span>方法，结合FutureTask类包装Callable对象，实现多线程<br>优点：有返回值，拓展性也高<br>缺点：jdk5以后才支持，需要重写<span class="hljs-keyword">call</span>方法，结合多个类比如FutureTask和Thread类<br><br><br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> MyTask implements Callable&lt;<span class="hljs-keyword">Object</span>&gt; &#123;<br>    @Override<br>    <span class="hljs-built_in">public</span> <span class="hljs-keyword">Object</span> <span class="hljs-keyword">call</span>() throws <span class="hljs-keyword">Exception</span> &#123;<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;通过Callable实现多线程，名称：&quot;+Thread.currentThread().getName());<br><br>        <span class="hljs-keyword">return</span> &quot;这是返回值&quot;;<br>    &#125;<br>&#125;<br><br><span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>     FutureTask&lt;<span class="hljs-keyword">Object</span>&gt; futureTask = <span class="hljs-built_in">new</span> FutureTask&lt;&gt;(()-&gt;&#123;<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;通过Callable实现多线程，名称：&quot;+Thread.currentThread().getName());<br>        <span class="hljs-keyword">return</span> &quot;这是返回值&quot;;<br>    &#125;);<br>    // MyTask myTask = <span class="hljs-built_in">new</span> MyTask();<br>    // FutureTask&lt;<span class="hljs-keyword">Object</span>&gt; futureTask = <span class="hljs-built_in">new</span> FutureTask&lt;&gt;(myTask);<br>    //FutureTask继承了Runnable，可以放在Thread中启动执行<br>    Thread thread = <span class="hljs-built_in">new</span> Thread(futureTask);<br>    thread.setName(&quot;demo3&quot;);<br>    thread.<span class="hljs-keyword">start</span>();<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;主线程名称:&quot;+Thread.currentThread().getName());<br><br>    try &#123;<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(futureTask.<span class="hljs-keyword">get</span>());<br><br>    &#125; catch (InterruptedException e) &#123;<br>        //阻塞等待中被中断，则抛出<br>        e.printStackTrace();<br>    &#125; catch (ExecutionException e) &#123;<br><br>        //执行过程发送异常被抛出<br>        e.printStackTrace();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>通过线程池创建线程</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java">自定义Runnable接口，实现run方法，创建线程池，调用执行方法并传入对象<br>优点：安全高性能，复用线程<br>缺点: jdk5后才支持，需要结合Runnable进行使用 <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadDemo4</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123; <br><span class="hljs-meta">@Override</span><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br> System.out.println(<span class="hljs-string">&quot;通过线程池+runnable实现多线程，名称：&quot;</span>+Thread.currentThread().getName());<br> &#125;<br>&#125; <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br> <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">3</span>); <br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br> executorService.execute(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadDemo4</span>());<br> &#125; <br>System.out.println(<span class="hljs-string">&quot;主线程名称:&quot;</span>+Thread.currentThread().getName()); <br><span class="hljs-comment">//关闭线程池</span><br> executorService.shutdown();<br>&#125;<br></code></pre></td></tr></table></figure><p>一般常用线程池和和runanble，简单方便扩展和高性能</p><h3 id="四线程有几种状态">四、<strong>线程有几种状态</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs context">JDK的线程状态分6种，JVM里面9种，我们一般说JDK的线程状态<br><br>常见的5种状态<br><br>创建(NEW): 生成线程对象，但是并没有调用该对象start(), new Thread()<br><br>就绪(Runnable)：当调用线程对象的start()方法，线程就进入就绪状态，但是此刻线程调度还没把该线程设置为当前线程，就是没获得CPU使用权。   如果线程运行后，从等待或者睡眠中回来之后，也会进入就绪状态<br>    注意:有些文档把就绪和运行两种状态统一称为 “运行中”<br><br>运行(Running)<br>    程序将处于就绪状态的线程设置为当前线程，即获得CPU使用权，这个时候线程进入运行状态，开始运行run里面的逻辑<br><br>阻塞(Blocked)<br>    等待阻塞：进入该状态的线程需要等待其他线程作出一定动作(通知或中断)，这种状态的话CPU不会分配过来，他们需要被唤醒，可能也会无限等待下去。比如调用wait(状态就会变成WAITING状态)，也可能通过调用sleep(状态就会变成TIMED_WAITING), join或者发出IO请求，阻塞结束后线程重新进入就绪状态<br><br>    同步阻塞：线程在获取synchronized同步锁失败，即锁被其他线程占用，它就会进入同步阻塞状态<br><br>    备注：相关资料会用细分下面的状态<br>        等待(WAITING)：进入该状态的线程需要等待其他线程做出一些特定动作（通知或中断）。<br>        超时等待(TIMED_WAITING)：该状态不同于WAITING，它可以在指定的时间后自行返回<br><br><br>死亡(TERMINATED):一个线程run方法执行结束，该线程就死亡了，不能进入就绪状态<br></code></pre></td></tr></table></figure><h3 id="五多线程开发里面常用的方法">五、多线程开发里面常用的方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs context">sleep<br>    属于线程Thread的方法<br>    让线程暂缓执行，等待预计时间之后再恢复<br>    交出CPU使用权，不会释放锁<br>    进入阻塞状态TIME_WAITGING，睡眠结束变为就绪Runnable<br><br>yield<br>    属于线程Thread的方法<br>    t1/t2/t3<br>    暂停当前线程的对象，去执行其他线程<br>    交出CPU使用权，不会释放锁，和sleep类似<br>    作用：让相同优先级的线程轮流执行，但是不保证一定轮流<br>    注意：不会让线程进入阻塞状态，直接变为就绪Runnable，只需要重新获得CPU使用权<br><br><br>join  <br>    属于线程Thread的方法<br>    在主线程上运行调用该方法，会让主线程休眠，不会释放已经持有的对象锁<br>    让调用join方法的线程先执行完毕，在执行其他线程<br>    类似让救护车警车优先通过<br><br>wait<br>    属于Object的方法<br>    当前线程调用对象的wait方法，会释放锁，进入线程的等待队列<br>    需要依靠notify或者notifyAll唤醒，或者wait(timeout)时间自动唤醒<br><br>notify<br>    属于Object的方法<br>    唤醒在对象监视器上等待的单个线程，选择是任意的<br><br>notifyAll<br>    属于Object的方法<br>    唤醒在对象监视器上等待的全部线程<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java语法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>java集合框架List</title>
    <link href="/2022/09/30/java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6List/"/>
    <url>/2022/09/30/java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6List/</url>
    
    <content type="html"><![CDATA[<h3id="vector和arraylistlinkedlist联系和区别分别的使用场景">Vector和ArrayList、LinkedList联系和区别？分别的使用场景</h3><ul><li>线程安全<ul><li>ArrayList：底层是数组实现，线程不安全，查询和修改非常快，但是增加和删除慢</li><li>LinkedList:底层是双向链表，线程不安全，查询和修改速度慢，但是增加和删除速度快</li><li>Vector:底层是数组实现，线程安全的，操作的时候使用synchronized进行加锁</li></ul></li><li>使用场景<ul><li>Vector已经很少用了</li><li>增加和删除场景多则用LinkedList</li><li>查询和修改多则用ArrayList</li></ul></li></ul><h3id="如果需要保证线程安全arraylist应该怎么做">如果需要保证线程安全，ArrayList应该怎么做</h3><ol type="1"><li>方式一：自己写个包装类，根据业务一般是add/update/remove加锁</li><li>方式二：Collections.synchronizedList(new ArrayList&lt;&gt;());使用synchronized加锁</li><li>方式三：CopyOnWriteArrayList&lt;&gt;() 使用ReentrantLock加锁</li></ol><h3id="collections.synchronizedlist和copyonwritearraylist区别">Collections.synchronizedList和CopyOnWriteArrayList&lt;&gt;()区别</h3><ul><li>CopyOnWriteArrayList：执行修改操作时，会拷贝一份新的数组进行操作（add、set、remove等)，代价十分昂贵，在执行完修改后将原来集合指向新的集合来完成修改操作，源码里面用ReentrantLock可重入锁来保证不会有多个线程同时拷贝一份数组<ul><li>场景：读高性能，适用读操作远远大于写操作的场景中使用(读的时候是不需要加锁的，直接获取，删除和增加是需要加锁的,读多写少)</li></ul></li><li>Collections.synchronizedList：线程安全的原因是因为它几乎在每个方法中都使用了synchronized同步*锁<ul><li>场景：写操作性能比CopyOnWriteArrayList好，读操作性能并不如CopyOnWriteArrayList</li></ul></li></ul><h3id="copyonwritearraylist的设计思想是怎样的有什么缺点">CopyOnWriteArrayList的设计思想是怎样的,有什么缺点？</h3><ul><li><p>设计思想：读写分离+最终一致</p><p>缺点：内存占用问题,写时复制机制,内存里会同时驻扎两个对象的内存，旧的对象和新写入的对象,如果对象大则容易发生YongGC和Full GC</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Java语法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>try-catch-finally执行流程</title>
    <link href="/2022/09/29/try-catch-finally%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/"/>
    <url>/2022/09/29/try-catch-finally%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p>在执行try、catch中的return之前一定会执行finally中的代码（如果finally存在），如果finally中有return语句，就会直接执行finally中的return方法，所以finally中的return语句一定会被执行的</p><p>执行流程：finally执行前的代码里面有包含return，则会先确定return返回值，然后再执行finally的代码，最后再执行return</p><p>代码示例</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            System.out.println(a / <span class="hljs-number">0</span>);<br>            a = <span class="hljs-number">2</span>;<br>        &#125; <span class="hljs-keyword">catch</span> (ArithmeticException e) &#123;<br>            a = <span class="hljs-number">3</span>;<br>            <span class="hljs-keyword">return</span> a; <br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            a = <span class="hljs-number">4</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> a;<br>    &#125;<br></code></pre></td></tr></table></figure><p>上段代码最后返回值为3；执行try语句时，发生异常，catch中捕获，catch中有return语句，此时确定返回值为3，然后执行finally块，finally执行结束后回到catch，返回值已经确定，finally中重新赋值不会影响返回值，所以返回3；</p><p>下一段代码，finally中也有返回语句</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>       <span class="hljs-keyword">try</span> &#123;<br>           System.out.println(a / <span class="hljs-number">0</span>);<br>           a = <span class="hljs-number">2</span>;<br>       &#125; <span class="hljs-keyword">catch</span> (ArithmeticException e) &#123;<br>           a = <span class="hljs-number">3</span>;<br>           <span class="hljs-keyword">return</span> a;<br>       &#125; <span class="hljs-keyword">finally</span> &#123;<br>           a = <span class="hljs-number">4</span>; <br>           <span class="hljs-keyword">return</span> a;<br>       &#125;<br>   &#125;<br></code></pre></td></tr></table></figure><p>此时返回4，在finally中遇到return语句，重新确定返回值，并且执行返回语句，程序结束。</p>]]></content>
    
    
    <categories>
      
      <category>Java语法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>运算符</title>
    <link href="/2022/09/29/%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
    <url>/2022/09/29/%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
    
    <content type="html"><![CDATA[<h3 id="一运算符-和和的区别">一、运算符&amp;和&amp;&amp;、|和||的区别</h3><blockquote><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">&amp; 按位与操作</span><br>    只有对应的两个二进制数为<span class="hljs-number">1</span>时，结果位才为<span class="hljs-number">1</span><br>    <span class="hljs-number">1</span><span class="hljs-meta">&amp;1 = 1</span><br>    <span class="hljs-number">1</span><span class="hljs-meta">&amp;0 = 0</span><br>    <span class="hljs-number">0</span><span class="hljs-meta">&amp;1 = 0</span><br>    <span class="hljs-number">0</span><span class="hljs-meta">&amp;0 = 0</span><br><span class="hljs-string">| 按位或操作</span><br>    有一个为<span class="hljs-number">1</span>的时候，结果位就为<span class="hljs-number">1</span><br>    <span class="hljs-number">1</span><span class="hljs-string">|1 = 1</span><br>    <span class="hljs-number">1</span><span class="hljs-string">|0 = 1</span><br>    <span class="hljs-number">0</span><span class="hljs-string">|1 = 1</span><br>    <span class="hljs-number">0</span><span class="hljs-string">|0 = 0</span><br></code></pre></td></tr></table></figure></blockquote><blockquote><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">&amp; 和 &amp;&amp; 都可以实现 和 这个功能</span><br>区别：<span class="hljs-meta">&amp; 两边都运算，而 &amp;&amp; 先算 &amp;&amp; 左侧，若左侧为false 那么右侧就不运算，判断语句中推荐使用 &amp;&amp;，效率更高</span><br><br><span class="hljs-string">| 和 || 和上面类似</span><br>区别：<span class="hljs-string">||只要满足第一个条件，后面的条件就不再判断，而|要对所有的条件进行判断</span><br><br>把<span class="hljs-meta">&amp;&amp;和||称之为短路运算符</span><br></code></pre></td></tr></table></figure></blockquote><h3 id="二">二、&lt;<和>&gt;</h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">将一个数左移<span class="hljs-built_in">n</span>位，相当于乘以<span class="hljs-number">2</span>的<span class="hljs-built_in">n</span>次方，位运算是CPU直接支持的，所以效率高<br></code></pre></td></tr></table></figure><p>计算2*8 使用<code>2 &lt;&lt; 3</code> 比<code>2*8</code>效率更高</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">常见的JDK源码里面HashMap的默认容量16<br>int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; <span class="hljs-string">4; // aka 16</span><br><span class="hljs-string"></span><br><span class="hljs-string">直接是二进制操作了，表示1左移4</span>位，变成10000，转为10进制也就是16, 直接以二进制形式去运行，效率更高<br></code></pre></td></tr></table></figure><h3 id="三运算符">三、^运算符</h3><p>传递两个非0的int数值进去，实现变量交换的方式，有几种方式？</p><ol type="1"><li><p>```java public static void swap(int a, int b){</p><pre><code class="hljs">    System.out.printf(&quot;a=%d, b=%d&quot;,a,b);    a = a + b;    b = a - b ;    a = a - b;    System.out.printf(&quot;\na=%d, b=%d&quot;,a,b);&#125;</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp">   <br>   通过加减运算实现交换，不需要额外定义变量<br><br><span class="hljs-number">2.</span> 异或运算 (一个数与另一个数异或两次是其本身， 一个数和自身异或结果是<span class="hljs-number">0</span> )<br>   <br>   ```<span class="hljs-function">java</span><br><span class="hljs-function">    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">swap2</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span>&#123;<br>   <br>        System.out.<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;a=%d, b=%d&quot;</span>,a,b);<br>   <br>        a = a^b;   <span class="hljs-comment">// a1 = a^b</span><br>        b = b^a;   <span class="hljs-comment">// b = b^a^b</span><br>        a = a^b;   <span class="hljs-comment">// a = a1^b = a^b^a</span><br>   <br>        System.out.<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\na=%d, b=%d&quot;</span>,a,b);<br>    &#125;<br></code></pre></td></tr></table></figure><p>通过^运算符，效率更高</p></li></ol><h3 id="四和euqals">四、==和euqals</h3><ul><li>基本数据类型比较 要用==判断是否相等</li><li>引用数据类型：==比较的是内存地址是否一样，不同对象的内存地址不一样，equals比较的是具体的内容，也可以让开发者去定义什么条件去判断两个对象是否一样</li></ul>]]></content>
    
    
    <categories>
      
      <category>Java语法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lambda</title>
    <link href="/2022/09/28/Lambda/"/>
    <url>/2022/09/28/Lambda/</url>
    
    <content type="html"><![CDATA[<h2 id="lambda表达式">Lambda表达式</h2><h3 id="简介">简介</h3><p>Lambda表达式（也称闭包），是Java8中最受期待和欢迎的新特性之一。在Java语法层面Lambda表达式允许函数作为一个方法的参数（函数作为参数传递到方法中），或者把代码看成数据。Lambda表达式可以简化函数式接口的使用。函数式接口就是一个只具有一个抽象方法的普通接口，像这样的接口就可以使用Lambda表达式来简化代码的编写。</p><p><strong>使用Lambda表达式的前提</strong><strong>对应接口有且只有一个抽象方法！！</strong>！</p><h3 id="基础语法">基础语法</h3><p>Lambda 表达式的基础语法：Java8中引入了一个新的操作符 “-&gt;”该操作符称为箭头操作符或 Lambda 操作符 箭头操作符将 Lambda表达式拆分成两部分： 左侧：Lambda 表达式的参数列表 右侧：Lambda表达式中所需执行的功能， 即 Lambda 体<code>(args1, args2...) -&gt; &#123;&#125;;</code></p><h3 id="lambda表达式的重要特征">Lambda表达式的重要特征</h3><ul><li>可选类型声明：不需要声明参数类型，编译器可以统一识别参数值。</li><li>可选的参数圆括号：一个参数无需定义圆括号，但多个参数需要定义圆括号。</li><li>可选的大括号：如果主体包含了一个语句，就不需要使用大括号。</li><li>可选的返回关键字：如果主体只有一个表达式返回值则编译器会自动返回值，大括号需要指定明表达式返回了一个数值。</li></ul><h3 id="使用lambda表达式的优缺点">使用Lambda表达式的优缺点</h3><ul><li><p>优点</p><p>使用Lambda表达式可以简化接口匿名内部类的使用，可以减少类文件的生成</p></li><li><p>缺点</p><p>使用Lambda表达式会减弱代码的可读性，而且Lambda表达式的使用局限性比较强，只能适用于接口只有一个抽象方法时使用，不宜调试。</p></li></ul><h3 id="使用案例">使用案例</h3><ol type="1"><li><p>例1、用lambda表达式实现Runnable</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Java 8之前：</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>    System.out.println(<span class="hljs-string">&quot;Before Java8, too much code for too little to do&quot;</span>);<br>    &#125;<br>&#125;).start();<br><br><span class="hljs-comment">//Java 8方式：</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>( () -&gt; System.out.println(<span class="hljs-string">&quot;In Java8, Lambda expression rocks !!&quot;</span>) ).start();<br></code></pre></td></tr></table></figure></li><li><p>例2、使用Java 8 lambda表达式进行事件处理</p><p>如果你用过SwingAPI编程，你就会记得怎样写事件监听代码。这又是一个旧版本简单匿名类的经典用例，但现在可以不这样了。你可以用lambda表达式写出更好的事件监听代码，如下所示：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Java 8之前：</span><br><span class="hljs-type">JButton</span> <span class="hljs-variable">show</span> <span class="hljs-operator">=</span>  <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;Show&quot;</span>);<br>show.addActionListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ActionListener</span>() &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">actionPerformed</span><span class="hljs-params">(ActionEvent e)</span> &#123;<br>    System.out.println(<span class="hljs-string">&quot;Event handling without lambda expression is boring&quot;</span>);<br>    &#125;<br>&#125;);<br><br><span class="hljs-comment">// Java 8方式：</span><br>show.addActionListener((e) -&gt; &#123;<br>    System.out.println(<span class="hljs-string">&quot;Light, Camera, Action !! Lambda expressions Rocks&quot;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure></li><li><p>例3、使用lambda表达式对列表进行迭代</p><p>如果你使过几年Java，你就知道针对集合类，最常见的操作就是进行迭代，并将业务逻辑应用于各个元素，例如处理订单、交易和事件的列表。由于Java是命令式语言，Java8之前的所有循环代码都是顺序的，即可以对其元素进行并行化处理。如果你想做并行过滤，就需要自己写代码，这并不是那么容易。通过引入lambda表达式和默认方法，将做什么和怎么做的问题分开了，这意味着Java集合现在知道怎样做迭代，并可以在API层面对集合元素进行并行处理。下面的例子里，我将介绍如何在使用lambda或不使用lambda表达式的情况下迭代列表。你可以看到列表现在有了一个forEach() 方法，它可以迭代所有对象，并将你的lambda代码应用在其中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Java 8之前：</span><br><span class="hljs-type">List</span> <span class="hljs-variable">features</span> <span class="hljs-operator">=</span> Arrays.asList(<span class="hljs-string">&quot;Lambdas&quot;</span>, <span class="hljs-string">&quot;Default Method&quot;</span>, <span class="hljs-string">&quot;Stream API&quot;</span>, <span class="hljs-string">&quot;Date and Time API&quot;</span>);<br><span class="hljs-keyword">for</span> (String feature : features) &#123;<br>    System.out.println(feature);<br>&#125;<br><br><span class="hljs-comment">// Java 8之后：</span><br><span class="hljs-type">List</span> <span class="hljs-variable">features</span> <span class="hljs-operator">=</span> Arrays.asList(<span class="hljs-string">&quot;Lambdas&quot;</span>, <span class="hljs-string">&quot;Default Method&quot;</span>, <span class="hljs-string">&quot;Stream API&quot;</span>, <span class="hljs-string">&quot;Date and Time API&quot;</span>);<br>features.forEach(n -&gt; System.out.println(n));<br><br><span class="hljs-comment">// 使用Java 8的方法引用更方便，方法引用由::双冒号操作符标示，</span><br><span class="hljs-comment">// 看起来像C++的作用域解析运算符</span><br>features.forEach(System.out::println);<br></code></pre></td></tr></table></figure></li></ol><h3 id="小结">小结</h3><p>lambda表达式可以是使代码更为简洁，java9新特性中加入Stream。Stream使用一种类似用 SQL 语句从数据库查询数据的直观方式来提供一种对 Java集合运算和表达的高阶抽象。</p><p>StreamAPI可以极大提高Java程序员的生产力，让程序员写出高效率、干净、简洁的代码。</p><p>这种风格将要处理的元素集合看作一种流， 流在管道中传输，并且可以在管道的节点上进行处理， 比如筛选， 排序，聚合等。</p><p>元素流在管道中经过中间操作（intermediateoperation）的处理，最后由最终操作(terminaloperation)得到前面处理的结果。</p><p>lambda在Stream中进行操作时会被大量使用。</p>]]></content>
    
    
    <categories>
      
      <category>Java语法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>归并排序</title>
    <link href="/2022/09/27/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/"/>
    <url>/2022/09/27/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<p>给定你一个长度为 <span class="math inline">\(n\)</span>的整数数列。</p><p>请你使用归并排序对这个数列按照从小到大进行排序。</p><p>并将排好序的数列按顺序输出。</p><h4 id="输入格式">输入格式</h4><p>输入共两行，第一行包含整数 <spanclass="math inline">\(n\)</span>。</p><p>第二行包含 <span class="math inline">\(n\)</span>个整数（所有整数均在 <span class="math inline">\(1 \sim 10^9\)</span>范围内），表示整个数列。</p><h4 id="输出格式">输出格式</h4><p>输出共一行，包含 <span class="math inline">\(n\)</span>个整数，表示排好序的数列。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le n \le 100000\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">53 1 2 4 5</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">1 2 3 4 5</code></pre><h3 id="参考代码">参考代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e6</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> n;<br><span class="hljs-type">int</span> a[N],t[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> a[],<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(l&gt;=r)<span class="hljs-keyword">return</span>;<br>    <span class="hljs-type">int</span> i=l,mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> j=mid+<span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">merge_sort</span>(a,l,mid),<span class="hljs-built_in">merge_sort</span>(a,j,r);<br>    <span class="hljs-type">int</span> k=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(i&lt;=mid&amp;&amp;j&lt;=r)<br>    &#123;<br><br>        <span class="hljs-keyword">if</span>(a[i]&lt;=a[j])t[k++]=a[i++];<br>        <span class="hljs-keyword">else</span> t[k++]=a[j++];<br>    &#125;<br>    <span class="hljs-keyword">while</span>(i&lt;=mid)t[k++]=a[i++];<br>    <span class="hljs-keyword">while</span>(j&lt;=r)t[k++]=a[j++];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=l,k=<span class="hljs-number">0</span>;i&lt;=r;i++)a[i]=t[k++];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin&gt;&gt;n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>    &#123;<br>        cin&gt;&gt;a[i];<br>    &#125;<br>    <span class="hljs-built_in">merge_sort</span>(a,<span class="hljs-number">0</span>,n<span class="hljs-number">-1</span>);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>    cout&lt;&lt;a[i]&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>归并排序</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>快速排序</title>
    <link href="/2022/09/27/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/"/>
    <url>/2022/09/27/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<p>给定你一个长度为 <span class="math inline">\(n\)</span>的整数数列。</p><p>请你使用快速排序对这个数列按照从小到大进行排序。</p><p>并将排好序的数列按顺序输出。</p><h4 id="输入格式">输入格式</h4><p>输入共两行，第一行包含整数 <spanclass="math inline">\(n\)</span>。</p><p>第二行包含 <span class="math inline">\(n\)</span>个整数（所有整数均在 <span class="math inline">\(1 \sim 10^9\)</span>范围内），表示整个数列。</p><h4 id="输出格式">输出格式</h4><p>输出共一行，包含 <span class="math inline">\(n\)</span>个整数，表示排好序的数列。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le n \le 100000\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">53 1 2 4 5</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">1 2 3 4 5</code></pre><h3 id="参考代码">参考代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">InputStreamReader</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in);<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> Integer.parseInt(br.readLine());<br>        <span class="hljs-type">int</span>[] arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[num];<br>        String[] res = br.readLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; num; i++) &#123;<br>            arr[i] = Integer.parseInt(res[i]);<br>        &#125;<br>        quickSort(arr, <span class="hljs-number">0</span>, num-<span class="hljs-number">1</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; num; i++) &#123;<br>            System.out.print(arr[i] + <span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>        br.close();<br>    &#125;<br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">quickSort</span><span class="hljs-params">(<span class="hljs-type">int</span>[] q, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>         <span class="hljs-keyword">if</span> (l &gt;= r) <span class="hljs-keyword">return</span>;<br>         <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> l-<span class="hljs-number">1</span>, j = r+<span class="hljs-number">1</span>;<br>         <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> (l+r)/<span class="hljs-number">2</span>;<br>         <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span>  q[mid];<br>         <span class="hljs-keyword">while</span>(i &lt; j)&#123;<br>             <span class="hljs-keyword">while</span>(q[++i] &lt; x);<br>             <span class="hljs-keyword">while</span>(q[--j] &gt; x);<br>             <span class="hljs-keyword">if</span> (i &lt; j) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> q[i];<br>                q[i] = q[j];<br>                q[j] = temp;<br>            &#125;<br>         &#125;<br>         quickSort(q,l,j);<br>         quickSort(q,j+<span class="hljs-number">1</span>,r);<br>     &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>快速排序</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>KMP字符串</title>
    <link href="/2022/09/26/KMP%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <url>/2022/09/26/KMP%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
    
    <content type="html"><![CDATA[<h3 id="题目描述">题目描述</h3><p>给定一个字符串 <span class="math inline">\(S\)</span>，以及一个模式串<spanclass="math inline">\(P\)</span>，所有字符串中只包含大小写英文字母以及阿拉伯数字。</p><p>模式串 <span class="math inline">\(P\)</span> 在字符串 <spanclass="math inline">\(S\)</span> 中多次作为子串出现。</p><p>求出模式串 <span class="math inline">\(P\)</span> 在字符串 <spanclass="math inline">\(S\)</span> 中所有出现的位置的起始下标。</p><h4 id="输入格式">输入格式</h4><p>第一行输入整数 <span class="math inline">\(N\)</span>，表示字符串<span class="math inline">\(P\)</span> 的长度。</p><p>第二行输入字符串 <span class="math inline">\(P\)</span>。</p><p>第三行输入整数 <span class="math inline">\(M\)</span>，表示字符串<span class="math inline">\(S\)</span> 的长度。</p><p>第四行输入字符串 <span class="math inline">\(S\)</span>。</p><h4 id="输出格式">输出格式</h4><p>共一行，输出所有出现位置的起始下标（下标从 <spanclass="math inline">\(0\)</span> 开始计数），整数之间用空格隔开。</p><h4 id="数据范围">数据范围</h4><p><span class="math inline">\(1 \le N \le 10^5\)</span><br /><span class="math inline">\(1 \le M \le 10^6\)</span></p><h4 id="输入样例">输入样例：</h4><pre><code class="hljs">3aba5ababa</code></pre><h4 id="输出样例">输出样例：</h4><pre><code class="hljs">0 2</code></pre><hr /><h3 id="算法">算法</h3><h4 id="java-代码">Java 代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.io.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//Scanner会超时</span><br>        <span class="hljs-comment">// Scanner cin = new Scanner(System.in);</span><br>        <span class="hljs-type">int</span> n, m;<br>        String p, s;<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(System.out));<br>        n = Integer.parseInt(reader.readLine());<br>        p = reader.readLine();<br>        m = Integer.parseInt(reader.readLine());<br>        s = reader.readLine();<br>        <span class="hljs-comment">// n = cin.nextInt();</span><br>        <span class="hljs-comment">// p = cin.next();</span><br>        <span class="hljs-comment">// m = cin.nextInt();</span><br>        <span class="hljs-comment">// s = cin.next();</span><br>        p = <span class="hljs-string">&quot; &quot;</span> + p;<br>        s = <span class="hljs-string">&quot; &quot;</span> + s;<br>        <span class="hljs-type">int</span>[] next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>, j = <span class="hljs-number">0</span>; i &lt;= n; i++)&#123;<br>            <span class="hljs-keyword">while</span>(j &gt; <span class="hljs-number">0</span> &amp;&amp; p.charAt(i) != p.charAt(j+<span class="hljs-number">1</span>))j = next[j];<br>            <span class="hljs-keyword">if</span>(p.charAt(j+<span class="hljs-number">1</span>) == p.charAt(i))<br>                j++;<br>            next[i] = j;<br>        &#125;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>, j = <span class="hljs-number">0</span>; i &lt;= m; i++)&#123;<br>            <span class="hljs-keyword">while</span>(j &gt; <span class="hljs-number">0</span> &amp;&amp; p.charAt(j+<span class="hljs-number">1</span>) != s.charAt(i))j = next[j];<br>            <span class="hljs-keyword">if</span>(p.charAt(j+<span class="hljs-number">1</span>) == s.charAt(i))<br>                j++;<br>            <span class="hljs-keyword">if</span>(j == n)&#123;<br>                writer.write(i - n +<span class="hljs-string">&quot; &quot;</span>);<br>                j = next[j];<br>            &#125;<br>        &#125;<br>        writer.flush();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>KMP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>java8时间类</title>
    <link href="/2022/09/25/java8%E6%97%B6%E9%97%B4%E7%B1%BB/"/>
    <url>/2022/09/25/java8%E6%97%B6%E9%97%B4%E7%B1%BB/</url>
    
    <content type="html"><![CDATA[<h2 id="date和calendar的缺点">Date和Calendar的缺点</h2><p>Java原本提供了Data和Calendar用于处理日期、时间的类，包括创建日期、时间对象，获取系统当前日期、时间等操作。但Date不仅无法实现国际化，而且它对不同属性也使用了前后矛盾的偏移量，比如月份与小时都是从0开始的，月份中的天则是从1开始的，年又是从1900开始的，而java.util.Calendar则显得过于复杂。从下面介绍可以看到Java对日期、时间处理不足。Java洗浴了Joda-Time库（一个被广泛使用的日期、时间库）的经验，提供了一套全新的日期时间库。</p><h2 id="定义">定义</h2><ul><li>LocalDateTime：A date-time without a time-zone in the ISO-8601calendar system, such as 2007-12-03T10:15:30.</li><li>ZonedDateTime：A date-time with a time-zone in the ISO-8601 calendarsystem, such as 2007-12-03T10:15:30+01:00 Europe/Paris.</li><li>ZoneId: A time-zone ID, such as Europe/Paris.</li><li>ZoneOffset:A time-zone offset from Greenwich/UTC, such as+02:00.</li></ul><p>LocalDateTime表示不带时区的时间，ZonedDateTime是由LocalDateTime和时区ZoneId或者LocalDateTime和与格林标准时间的差ZoneOffset组成</p><h3 id="使用">使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 字符串时间</span><br><span class="hljs-type">String</span> <span class="hljs-variable">dateStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2020-01-22 19:30:00&quot;</span>;<br><br><span class="hljs-comment">// 定义上海时区</span><br><span class="hljs-type">ZoneId</span> <span class="hljs-variable">zoneShanghai</span> <span class="hljs-operator">=</span> ZoneId.of(<span class="hljs-string">&quot;Asia/Shanghai&quot;</span>);<br><br><span class="hljs-comment">// 标准时间+3小时</span><br><span class="hljs-type">ZoneOffset</span> <span class="hljs-variable">zoneOffset</span> <span class="hljs-operator">=</span> ZoneOffset.ofHours(<span class="hljs-number">3</span>);<br><br><span class="hljs-comment">// 定义格式转换器</span><br><span class="hljs-type">DateTimeFormatter</span> <span class="hljs-variable">formatter</span> <span class="hljs-operator">=</span> DateTimeFormatter.ofPattern(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);<br><br><span class="hljs-comment">// 字符串时间转换为LocalDateTime格式</span><br><span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">localDateTime</span> <span class="hljs-operator">=</span> LocalDateTime.from(formatter.parse(dateStr));<br><br><span class="hljs-comment">// 按上海时区定义ZonedDateTime时间</span><br><span class="hljs-type">ZonedDateTime</span> <span class="hljs-variable">dateTime1</span> <span class="hljs-operator">=</span> ZonedDateTime.of(localDateTime,zoneShanghai);<br><br><span class="hljs-comment">// +3时区</span><br><span class="hljs-type">ZonedDateTime</span> <span class="hljs-variable">dateTime2</span> <span class="hljs-operator">=</span> ZonedDateTime.of(localDateTime,zoneOffset);<br><br><span class="hljs-comment">// 日期转换，带时区</span><br><span class="hljs-type">String</span> <span class="hljs-variable">time1</span> <span class="hljs-operator">=</span> formatter.withZone(zoneShanghai).format(dateTime1);<br><br><span class="hljs-type">String</span> <span class="hljs-variable">time2</span> <span class="hljs-operator">=</span> formatter.withZone(zoneShanghai).format(dateTime2);<br><span class="hljs-comment">// time1 = &quot;2020-01-22 19:30:00&quot; , 对应的时区转换，日期没有问题</span><br><span class="hljs-comment">// time2 = &quot;2020-01-23 00:30:00&quot;， 使用了上海时区（+8小时时区），结果为+5个小时时间</span><br></code></pre></td></tr></table></figure><p>ZonedDateTime 和LocalDateTime时间格式都可以很方便的是做时间操作，下面仅已LocalDateTime举例</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 加一天，一周，一月  ，判断两个日期</span><br><span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">newTime</span> <span class="hljs-operator">=</span> localDateTime.plusDays(<span class="hljs-number">1L</span>);<br>newDate = localDateTime.plusWeeks(<span class="hljs-number">1L</span>);<br>newDate = localDateTime.plusMonths(<span class="hljs-number">1L</span>);<br><br>localDateTime.isAfter(newDate);  <span class="hljs-comment">// false</span><br><br><span class="hljs-comment">// 获取周、月等信息</span><br>newDate.getDayOfWeek();<br>newDate.getMonth();<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java语法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
